<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Xuanwo&#39;s Blog</title>
  <subtitle>A Long Way to Go</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xuanwo.org/"/>
  <updated>2016-04-18T06:43:21.542Z</updated>
  <id>https://xuanwo.org/</id>
  
  <author>
    <name>Xuanwo</name>
    <email>xuanwo.cn@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Gitlab部署和汉化以及简单运维</title>
    <link href="https://xuanwo.org/2016/04/13/gitlab-install-intro/"/>
    <id>https://xuanwo.org/2016/04/13/gitlab-install-intro/</id>
    <published>2016-04-13T23:20:00.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h1&gt;&lt;p&gt;在跟网络中心的老师沟通成立镜像站的相关事宜的时候，意外地接下来搭建一套校内的 Git 服务的任务。&lt;br&gt;&lt;a href=&quot;https://imnerd.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;@怡红公子&lt;/a&gt; 曾经搭建过一套类似的服务，但由于服务器端没有开启 VT 虚拟化导致不能安装 64 位的操作系统，再加上 Gitlab 不提供 32 位的安装包，所以长期以来怡红公子一直都是自行编译并配置 Gitlab 。考虑到后续维护的方便，我们决定趁着这个机会使用另一台支持安装 64 位操作系统的服务器，一劳永逸地解决这个问题。&lt;br&gt;我们的服务器环境是 &lt;strong&gt;CentOS 7.2 64bit&lt;/strong&gt; ，以下所有操作均以此为基准。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;Gitlab-安装&quot;&gt;&lt;a href=&quot;#Gitlab-安装&quot; class=&quot;headerlink&quot; title=&quot;Gitlab 安装&quot;&gt;&lt;/a&gt;Gitlab 安装&lt;/h1&gt;&lt;p&gt;推荐使用 &lt;a href=&quot;https://about.gitlab.com/downloads&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Install a GitLab CE Omnibus package&lt;/a&gt; 安装 ，其他发行版可以点选对应版本，不再赘述。&lt;/p&gt;
&lt;h2 id=&quot;安装和配置依赖&quot;&gt;&lt;a href=&quot;#安装和配置依赖&quot; class=&quot;headerlink&quot; title=&quot;安装和配置依赖&quot;&gt;&lt;/a&gt;安装和配置依赖&lt;/h2&gt;&lt;p&gt;如果需要安装 Postfix 来发送邮件，则需要在安装过程中选择 &lt;code&gt;Internet Site&lt;/code&gt;。你也可以使用 Sendmail 之类的第三方发信服务或者使用自行配制的 SMTP 服务器。&lt;br&gt;除此以外，下列命令将会在防火墙中打开 HTTP(80) 和 SSH(22) 对应端口。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install curl policycoreutils openssh-server openssh-clients&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; sshd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl start sshd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install postfix&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl &lt;span class=&quot;built_in&quot;&gt;enable&lt;/span&gt; postfix&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl start postfix&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo firewall-cmd --permanent --add-service=http&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl reload firewalld&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;添加-Gitlab-源并安装&quot;&gt;&lt;a href=&quot;#添加-Gitlab-源并安装&quot; class=&quot;headerlink&quot; title=&quot;添加 Gitlab 源并安装&quot;&gt;&lt;/a&gt;添加 Gitlab 源并安装&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;curl &lt;span class=&quot;_&quot;&gt;-s&lt;/span&gt;S https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install gitlab-ce&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这个脚本会在源中添加 Gitlab-CE ，并自动执行&lt;code&gt;yum makecache&lt;/code&gt;，然后安装&lt;code&gt;gitlab-ce&lt;/code&gt;。由于源在国外，可能速度较慢，也可以手动添加来自 清华tuna 的源： &lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/help/gitlab-ce/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://mirrors.tuna.tsinghua.edu.cn/help/gitlab-ce/&lt;/a&gt; ， 链接中为各发行版下的教程，感谢 清华tuna 提供镜像。&lt;/p&gt;
&lt;h2 id=&quot;配置并启动-Gitlab&quot;&gt;&lt;a href=&quot;#配置并启动-Gitlab&quot; class=&quot;headerlink&quot; title=&quot;配置并启动 Gitlab&quot;&gt;&lt;/a&gt;配置并启动 Gitlab&lt;/h2&gt;&lt;p&gt;此时已经可以启动服务了：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;进行一长串复杂的启动流程之后， gitlab 就已经可以通过 &lt;code&gt;localhost&lt;/code&gt; 进行访问了。&lt;/p&gt;
&lt;h1 id=&quot;Gitlab-配置&quot;&gt;&lt;a href=&quot;#Gitlab-配置&quot; class=&quot;headerlink&quot; title=&quot;Gitlab 配置&quot;&gt;&lt;/a&gt;Gitlab 配置&lt;/h1&gt;&lt;h2 id=&quot;修改域名&quot;&gt;&lt;a href=&quot;#修改域名&quot; class=&quot;headerlink&quot; title=&quot;修改域名&quot;&gt;&lt;/a&gt;修改域名&lt;/h2&gt;&lt;p&gt;默认的配置文件保存在 &lt;code&gt;/etc/gitlab/gitlab.rb&lt;/code&gt; ，执行：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo vim /etc/gitlab/gitlab.rb&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;打开文件，并修改：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;external_url &lt;span class=&quot;string&quot;&gt;&#39;http://your.domain&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;再次执行&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;即可。&lt;/p&gt;
&lt;p&gt;有一定概率出现 502 错误，刷新浏览器或者再次更新配置即可。&lt;/p&gt;
&lt;h2 id=&quot;Gitlab-汉化&quot;&gt;&lt;a href=&quot;#Gitlab-汉化&quot; class=&quot;headerlink&quot; title=&quot;Gitlab 汉化&quot;&gt;&lt;/a&gt;Gitlab 汉化&lt;/h2&gt;&lt;p&gt;由于服务对象是广大师生，为了降低新手上手的难度，所有进行汉化也是非常有必要的。好在国内有人已经进行了这方面的工作，我们只需要共享其成果即可（欢迎向&lt;a href=&quot;https://gitlab.com/larryli/gitlab&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;原项目&lt;/a&gt;提交高质量翻译）。&lt;/p&gt;
&lt;p&gt;首先确认版本：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo cat /opt/gitlab/embedded/service/gitlab-rails/VERSION&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;并确认当前汉化版本的 VERSION 是否相同，当前最新的汉化版本为 8.6 。&lt;br&gt;如果安装版本小于当前汉化版本，请先升级。如果安装版本大于当前汉化版本，请在本项目中提交新的 issue。&lt;br&gt;如果版本相同，首先在本地 clone 仓库。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# GitLab.com 仓库&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://gitlab.com/larryli/gitlab.git&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 或 Coding.net 镜像&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://git.coding.net/larryli/gitlab.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;根据我的测试， Coding.net 的镜像不完整，clone 之后无法 checkout&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然后比较汉化分支和原分支，导出 patch 用的 diff 文件。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 8.1 版本的汉化补丁&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;git diff origin/8-6-stable..8-6-zh &amp;gt; ../8.6.diff&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后上传 &lt;code&gt;8.6.diff&lt;/code&gt; 文件到服务器。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 停止 gitlab&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo patch &lt;span class=&quot;_&quot;&gt;-d&lt;/span&gt; /opt/gitlab/embedded/service/gitlab-rails -p1 &amp;lt; 8.6.diff&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;确定没有 .rej 文件，重启 GitLab 即可。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果汉化中出现问题，请重新安装 GitLab（&lt;strong&gt;注意备份数据&lt;/strong&gt;）。&lt;/p&gt;
&lt;h1 id=&quot;Gitlab-运维&quot;&gt;&lt;a href=&quot;#Gitlab-运维&quot; class=&quot;headerlink&quot; title=&quot;Gitlab 运维&quot;&gt;&lt;/a&gt;Gitlab 运维&lt;/h1&gt;&lt;h2 id=&quot;管理&quot;&gt;&lt;a href=&quot;#管理&quot; class=&quot;headerlink&quot; title=&quot;管理&quot;&gt;&lt;/a&gt;管理&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 启动所有 gitlab 组件：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl start&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 停止所有 gitlab 组件：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl stop&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 重启所有 gitlab 组件：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl restart&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;备份&quot;&gt;&lt;a href=&quot;#备份&quot; class=&quot;headerlink&quot; title=&quot;备份&quot;&gt;&lt;/a&gt;备份&lt;/h2&gt;&lt;p&gt;备份GitLab repositories and GitLab metadata&lt;br&gt;在 crontab 中加入如下命令：&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;0 2 * * * /usr/bin/gitlab-rake gitlab:backup:create&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;恢复&quot;&gt;&lt;a href=&quot;#恢复&quot; class=&quot;headerlink&quot; title=&quot;恢复&quot;&gt;&lt;/a&gt;恢复&lt;/h2&gt;&lt;p&gt;首先进入备份 gitlab 的目录，这个目录是配置文件中的&lt;code&gt;gitlab_rails[&amp;#39;backup_path&amp;#39;]&lt;/code&gt;，默认为&lt;code&gt;/var/opt/gitlab/backups&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;然后停止 unicorn 和 sidekiq ，保证数据库没有新的连接，不会有写数据情况。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl stop unicorn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ok: down: unicorn: 0s, normally up&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl stop sidekiq&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ok: down: sidekiq: 0s, normally up&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后恢复数据，1406691018为备份文件的时间戳&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;gitlab-rake gitlab:backup:restore BACKUP=1406691018&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;修改数据存储地址&quot;&gt;&lt;a href=&quot;#修改数据存储地址&quot; class=&quot;headerlink&quot; title=&quot;修改数据存储地址&quot;&gt;&lt;/a&gt;修改数据存储地址&lt;/h2&gt;&lt;p&gt;默认情况下，gitlab 将数据存储在&lt;code&gt;/var/opt/gitlab/git-data&lt;/code&gt;目录下，受限于分区情况&amp;amp;方便管理，我们需要将数据迁移到别的目录下。&lt;/p&gt;
&lt;h3 id=&quot;无需数据迁移&quot;&gt;&lt;a href=&quot;#无需数据迁移&quot; class=&quot;headerlink&quot; title=&quot;无需数据迁移&quot;&gt;&lt;/a&gt;无需数据迁移&lt;/h3&gt;&lt;p&gt;如果还没有投入使用，则可以直接在配置文件中添加：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git_data_dir &lt;span class=&quot;string&quot;&gt;&quot;/path/to/git-data&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后执行：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;就可以生效了。&lt;/p&gt;
&lt;h3 id=&quot;进行数据迁移&quot;&gt;&lt;a href=&quot;#进行数据迁移&quot; class=&quot;headerlink&quot; title=&quot;进行数据迁移&quot;&gt;&lt;/a&gt;进行数据迁移&lt;/h3&gt;&lt;p&gt;如果已经有数据了，则需要进行迁移。&lt;/p&gt;
&lt;p&gt;首先需要暂停服务，避免用户在迁移期间读写数据：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl stop&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后使用rsync数据进行迁移：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意前一个地址不需要&lt;code&gt;/&lt;/code&gt;，后一个地址需要&lt;code&gt;/&lt;/code&gt;，且只需要迁移&lt;code&gt;repositories&lt;/code&gt;目录即可&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo rsync -av /var/opt/gitlab/git-data/repositories /path/to/git-data/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后运行配置工具以更新并重启服务：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;官网文档是先更新配置再启动服务，但我在使用中发现先更新配置会提示无法连接上服务器，出现这种问题时可以先启动服务再更新配置。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl start&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最后不要忘了在网页端确认数据的地址是否正确。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;关于权限问题&lt;br&gt;在使用中，我一开始创建了一个&lt;code&gt;gitlabhq&lt;/code&gt;用户并创建了一个文件夹，然后修改地址，服务正常启动后提示500。&lt;br&gt;后来使用&lt;code&gt;root&lt;/code&gt;账户在&lt;code&gt;/home&lt;/code&gt;下直接创建文件夹解决了这个问题。&lt;br&gt;如果有遇到类似问题的，可以尝试用&lt;code&gt;root&lt;/code&gt;创建目录。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;监听IPv6&quot;&gt;&lt;a href=&quot;#监听IPv6&quot; class=&quot;headerlink&quot; title=&quot;监听IPv6&quot;&gt;&lt;/a&gt;监听IPv6&lt;/h3&gt;&lt;p&gt;教育网拥有得天独厚的IPv6资源，所以为我们的gitlab服务添加IPv6支持很有必要。&lt;/p&gt;
&lt;p&gt;修改&lt;code&gt;/etc/gitlab/gitlab.rb&lt;/code&gt;文件中的：&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# nginx[&#39;listen_addresses&#39;] = [&#39;*&#39;]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;为&lt;/p&gt;
&lt;figure class=&quot;highlight ruby&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;nginx[&lt;span class=&quot;string&quot;&gt;&#39;listen_addresses&#39;&lt;/span&gt;] = [&lt;span class=&quot;string&quot;&gt;&#39;*&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;[::]&#39;&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后执行&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo gitlab-ctl reconfigure&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后就可以通过IPv6访问了。&lt;/p&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://about.gitlab.com/downloads/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Gitlab 下载&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gitlab.com/larryli/gitlab/wikis/home&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitLab Community Edition · Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://linuxtools-rst.readthedocs.org/zh_CN/latest/tool/crontab.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;crontab 定时任务&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/raketasks/backup_restore.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Backup restore&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/configuration.md#storing-git-data-in-an-alternative-directory&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Storing Git data in an alternative directory&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年04月14日 首次发布&lt;/li&gt;
&lt;li&gt;2016年04月18日 新增数据迁移&amp;amp;监听IPv6配置&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h1&gt;&lt;p&gt;在跟网络中心的老师沟通成立镜像站的相关事宜的时候，意外地接下来搭建一套校内的 Git 服务的任务。&lt;br&gt;&lt;a href=&quot;https://imnerd.org/&quot;&gt;@怡红公子&lt;/a&gt; 曾经搭建过一套类似的服务，但由于服务器端没有开启 VT 虚拟化导致不能安装 64 位的操作系统，再加上 Gitlab 不提供 32 位的安装包，所以长期以来怡红公子一直都是自行编译并配置 Gitlab 。考虑到后续维护的方便，我们决定趁着这个机会使用另一台支持安装 64 位操作系统的服务器，一劳永逸地解决这个问题。&lt;br&gt;我们的服务器环境是 &lt;strong&gt;CentOS 7.2 64bit&lt;/strong&gt; ，以下所有操作均以此为基准。&lt;/p&gt;
    
    </summary>
    
      <category term="Operate" scheme="https://xuanwo.org/categories/Operate/"/>
    
    
      <category term="运维" scheme="https://xuanwo.org/tags/%E8%BF%90%E7%BB%B4/"/>
    
      <category term="CUGBLUG" scheme="https://xuanwo.org/tags/CUGBLUG/"/>
    
      <category term="Gitlab" scheme="https://xuanwo.org/tags/Gitlab/"/>
    
  </entry>
  
  <entry>
    <title>docopt——好用的Python命令行参数解释器</title>
    <link href="https://xuanwo.org/2016/04/04/docopt-intro/"/>
    <id>https://xuanwo.org/2016/04/04/docopt-intro/</id>
    <published>2016-04-04T21:39:00.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Xuanwo/qingchat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;Qingchat&lt;/code&gt;&lt;/a&gt; 使用的命令行参数解释器是 &lt;a href=&quot;http://docopt.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;docopt&lt;/code&gt;&lt;/a&gt;，用下来感觉非常棒，所以决定介绍一下这个库。（&lt;em&gt;奉劝各位看官，珍爱生命，远离argparse。&lt;/em&gt;）&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;docopt 本质上是在 Python 中引入了一种针对命令行参数的形式语言，在代码的最开头使用&lt;code&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/code&gt;文档注释的形式写出符合要求的文档，就会自动生成对应的parse，体验非常赞。&lt;/p&gt;
&lt;h1 id=&quot;用法&quot;&gt;&lt;a href=&quot;#用法&quot; class=&quot;headerlink&quot; title=&quot;用法&quot;&gt;&lt;/a&gt;用法&lt;/h1&gt;&lt;h2 id=&quot;样例&quot;&gt;&lt;a href=&quot;#样例&quot; class=&quot;headerlink&quot; title=&quot;样例&quot;&gt;&lt;/a&gt;样例&lt;/h2&gt;&lt;p&gt;docopt的使用非常简单，以Qingchat为例，你只需要在代码最开头加入：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;Qingchat CLI&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Usage:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat config ip &amp;lt;ip&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat config port &amp;lt;port&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat config login&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat group list&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat group choose &amp;lt;group_name&amp;gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat group clean&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat group send -t &amp;lt;content&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat group send -i &amp;lt;media&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  qingchat group send -f &amp;lt;file&amp;gt; [&amp;lt;delaytime&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Options:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -h --help     Show this screen.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  -v --version     Show version.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后在执行代码中加入：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;arguments = docopt(__doc__, version=&lt;span class=&quot;string&quot;&gt;&#39;Qingchat 0.3.2&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;就会在你的程序中导入一个&lt;code&gt;arguments&lt;/code&gt;字典，这个字典中的内容形如：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;-f&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;-i&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;-t&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;content&amp;gt;&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;file&amp;gt;&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;group_name&amp;gt;&#39;&lt;/span&gt;: [],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;ip&amp;gt;&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;127.0.0.1&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;media&amp;gt;&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;&amp;lt;port&amp;gt;&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;choose&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;clean&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;config&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;group&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;ip&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;list&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;login&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;port&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;send&#39;&lt;/span&gt;: &lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这样应该就能很容易看出来，我们在文档中写的每一个短语，都被转化为一个对应的类型。只要直接调用&lt;code&gt;arguments[&amp;#39;xxx&amp;#39;]&lt;/code&gt;就可以判断或者使用对应的值，从而实现对应的功能。&lt;/p&gt;
&lt;h2 id=&quot;详解&quot;&gt;&lt;a href=&quot;#详解&quot; class=&quot;headerlink&quot; title=&quot;详解&quot;&gt;&lt;/a&gt;详解&lt;/h2&gt;&lt;p&gt;前面我们举了一个例子，下面我们来详细介绍一下如何完成一个符合 &lt;code&gt;docopt&lt;/code&gt; 要求的注释文档。&lt;/p&gt;
&lt;h3 id=&quot;Usage&quot;&gt;&lt;a href=&quot;#Usage&quot; class=&quot;headerlink&quot; title=&quot;Usage&quot;&gt;&lt;/a&gt;Usage&lt;/h3&gt;&lt;p&gt;所有出现在&lt;code&gt;usage:&lt;/code&gt;（区分大小写）和一个空行之间的文本都会被识别为一个命令组合，&lt;code&gt;usage&lt;/code&gt;后的第一个字母将会被识别为这个程序的名字，所有命令组合的每一个部分（空格分隔）都会成为字典中的一个key。&lt;/p&gt;
&lt;h4 id=&quot;参数&quot;&gt;&lt;a href=&quot;#参数&quot; class=&quot;headerlink&quot; title=&quot;参数&quot;&gt;&lt;/a&gt;参数&lt;/h4&gt;&lt;p&gt;形如 &lt;code&gt;&amp;lt;argument&amp;gt;&lt;/code&gt; 或者 &lt;code&gt;ARGUMENT&lt;/code&gt; 的文本将会被识别为参数。&lt;br&gt;在转化后的字典中的取值为 &lt;code&gt;True&lt;/code&gt; 或者 &lt;code&gt;False&lt;/code&gt; 。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program &amp;lt;host&amp;gt; &amp;lt;port&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;选项&quot;&gt;&lt;a href=&quot;#选项&quot; class=&quot;headerlink&quot; title=&quot;选项&quot;&gt;&lt;/a&gt;选项&lt;/h4&gt;&lt;p&gt;形如 &lt;code&gt;-o&lt;/code&gt; 或者 &lt;code&gt;--option&lt;/code&gt; 的文本将会被识别为选项。&lt;br&gt;在转化后的字典中的取值为 &lt;code&gt;True&lt;/code&gt; 或者 &lt;code&gt;False&lt;/code&gt; 。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program -f &amp;lt;file&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;Tips:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;短选项可以组合起来，比如&lt;code&gt;-abc&lt;/code&gt;等价于&lt;code&gt;-a -b -c&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;长选项需要的参数需要使用 &lt;code&gt;=&lt;/code&gt; 或者空格来分隔，&lt;code&gt;--input=ARG&lt;/code&gt; 等价于 &lt;code&gt;--input ARG&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;短选项可以不需要空格， &lt;code&gt;-f FILE&lt;/code&gt; 等价于 &lt;code&gt;-fFILE&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;命令&quot;&gt;&lt;a href=&quot;#命令&quot; class=&quot;headerlink&quot; title=&quot;命令&quot;&gt;&lt;/a&gt;命令&lt;/h4&gt;&lt;p&gt;其他不满足 &lt;code&gt;--options&lt;/code&gt; 或者 &lt;code&gt;&amp;lt;arguments&amp;gt;&lt;/code&gt; 的文本将会被识别为（子）命令。&lt;br&gt;在转化后的字典中取值为 &lt;code&gt;True&lt;/code&gt; 或者 &lt;code&gt;False&lt;/code&gt;。&lt;/p&gt;
&lt;h4 id=&quot;可选项&quot;&gt;&lt;a href=&quot;#可选项&quot; class=&quot;headerlink&quot; title=&quot;可选项&quot;&gt;&lt;/a&gt;可选项&lt;/h4&gt;&lt;p&gt;形如 &lt;code&gt;[optional elements]&lt;/code&gt; 的文本是可选项。&lt;br&gt;&lt;code&gt;elements&lt;/code&gt;包括上述的三种类型：参数，选项以及命令。&lt;/p&gt;
&lt;p&gt;在相同或者不同的括号中都是一样的：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program [command --option &amp;lt;argument&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;等价于&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program [command] [--option] [&amp;lt;argument&amp;gt;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;必填项&quot;&gt;&lt;a href=&quot;#必填项&quot; class=&quot;headerlink&quot; title=&quot;必填项&quot;&gt;&lt;/a&gt;必填项&lt;/h4&gt;&lt;p&gt;形如 &lt;code&gt;(required elements)&lt;/code&gt; 的文本是必填项。&lt;br&gt;上述三种元素默认都是必填项，&lt;code&gt;()&lt;/code&gt;符号用在一些比较特殊的情形下，比如：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program (--either-this &amp;lt;&lt;span class=&quot;keyword&quot;&gt;and&lt;/span&gt;-that&amp;gt; | &amp;lt;&lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt;-this&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;选择项&quot;&gt;&lt;a href=&quot;#选择项&quot; class=&quot;headerlink&quot; title=&quot;选择项&quot;&gt;&lt;/a&gt;选择项&lt;/h4&gt;&lt;p&gt;形如 &lt;code&gt;element|another&lt;/code&gt; 的文本是选择项，你可以从中选择一个值。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program go (--up | --down | --left | --right)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;列表项&quot;&gt;&lt;a href=&quot;#列表项&quot; class=&quot;headerlink&quot; title=&quot;列表项&quot;&gt;&lt;/a&gt;列表项&lt;/h4&gt;&lt;p&gt;形如 &lt;code&gt;element...&lt;/code&gt; 的文本是列表项，你可以输入多个参数。&lt;/p&gt;
&lt;p&gt;比如说：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Usage: my_program open &amp;lt;file&amp;gt;...&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后你可以通过&lt;code&gt;arguments[&amp;#39;&amp;lt;file&amp;gt;&amp;#39;]&lt;/code&gt; 来访问这个列表。&lt;/p&gt;
&lt;h3 id=&quot;Option&quot;&gt;&lt;a href=&quot;#Option&quot; class=&quot;headerlink&quot; title=&quot;Option&quot;&gt;&lt;/a&gt;Option&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Option&lt;/code&gt; 部分用于指定某些特殊情形，比如：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;将某个短参数与长参数关联起来，比如&lt;code&gt;-i &amp;lt;file&amp;gt;, --input &amp;lt;file&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;某个选项有一个参数&lt;/li&gt;
&lt;li&gt;选项的默认值，比如&lt;code&gt;--coefficient=K  The K coefficient [default: 2.95]&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;校验&quot;&gt;&lt;a href=&quot;#校验&quot; class=&quot;headerlink&quot; title=&quot;校验&quot;&gt;&lt;/a&gt;校验&lt;/h3&gt;&lt;p&gt;如果对自己完成的文档有疑问，可以使用&lt;a href=&quot;http://try.docopt.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;在线工具&lt;/a&gt;进行校验。&lt;/p&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年04月04日 首次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Xuanwo/qingchat&quot;&gt;&lt;code&gt;Qingchat&lt;/code&gt;&lt;/a&gt; 使用的命令行参数解释器是 &lt;a href=&quot;http://docopt.org/&quot;&gt;&lt;code&gt;docopt&lt;/code&gt;&lt;/a&gt;，用下来感觉非常棒，所以决定介绍一下这个库。（&lt;em&gt;奉劝各位看官，珍爱生命，远离argparse。&lt;/em&gt;）&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
      <category term="python" scheme="https://xuanwo.org/tags/python/"/>
    
      <category term="qingchat" scheme="https://xuanwo.org/tags/qingchat/"/>
    
  </entry>
  
  <entry>
    <title>微信多群直播的新探索——Qingchat</title>
    <link href="https://xuanwo.org/2016/04/01/qingchat-intro/"/>
    <id>https://xuanwo.org/2016/04/01/qingchat-intro/</id>
    <published>2016-04-01T22:03:00.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;在我之前写过的一篇文章中，我曾经探索过类似的问题：&lt;a href=&quot;https://xuanwo.org/2016/02/28/wechat-remove/&quot;&gt;微信群重复人员识别&lt;/a&gt;。当初我就提出过能否自动获取相关数据，但因为种种原因的限制不了了之了。后来发现了&lt;a href=&quot;https://github.com/sjdy521/Mojo-Weixin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mojo-Weixin&lt;/a&gt;这个库之后，我决定在这个的基础上实现一个微信多群直播的工具——Qingchat。（&lt;em&gt;尽管在刚刚实现完不久，微信就更新了转发到多个群的功能，Sad。&lt;/em&gt;）探索的成果如下： &lt;a href=&quot;https://github.com/Xuanwo/qingchat&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Qingchat&lt;/a&gt;，目前仅支持 python3 ，欢迎各位看官提 issues ，交 code ，或者拍砖。&lt;br&gt;接下来我会先介绍一下 Qingchat 的原理，然后介绍 Qingchat 的使用，最后展望一下 Qingchat 未来的发展方向。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;原理&quot;&gt;&lt;a href=&quot;#原理&quot; class=&quot;headerlink&quot; title=&quot;原理&quot;&gt;&lt;/a&gt;原理&lt;/h1&gt;&lt;p&gt;Qingchat 基于 &lt;a href=&quot;https://github.com/sjdy521/Mojo-Weixin&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mojo-Weixin&lt;/a&gt; 进行开发，通过调用 Mojo－Winxin 的 http 接口与微信服务器进行通信以实现群发功能。目前主要支持微信群发工作，可以从文件中读取内容，并根据内容长度设置发送延时以模拟真人输入效果。&lt;/p&gt;
&lt;h1 id=&quot;用法&quot;&gt;&lt;a href=&quot;#用法&quot; class=&quot;headerlink&quot; title=&quot;用法&quot;&gt;&lt;/a&gt;用法&lt;/h1&gt;&lt;h2 id=&quot;配置&quot;&gt;&lt;a href=&quot;#配置&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h2&gt;&lt;p&gt;想要使用Qingchat，首先需要在服务器或者本地配置好 Mojo－Weixin 环境。&lt;/p&gt;
&lt;h3 id=&quot;测试-amp-安装perl环境&quot;&gt;&lt;a href=&quot;#测试-amp-安装perl环境&quot; class=&quot;headerlink&quot; title=&quot;测试&amp;amp;安装perl环境&quot;&gt;&lt;/a&gt;测试&amp;amp;安装perl环境&lt;/h3&gt;&lt;p&gt;除了 Windows 环境，大部门环境下已经默认预装了 perl 环境，可以通过｀perl －－version｀查看。本环境要求 perl 5.10 以上。&lt;br&gt;缺乏相关环境的，可以安装对应系统的集成包：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;平台&lt;/th&gt;
&lt;th&gt;推荐选择&lt;/th&gt;
&lt;th&gt;下载地址&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Windows&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;StrawberryPerl&lt;/strong&gt;&lt;br&gt;2. ActivePerl&lt;br&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://strawberryperl.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;StrawberryPerl下载地址&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.activestate.com/activeperl/downloads&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ActivePerl下载地址&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Linux&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;ActivePerl&lt;/strong&gt;&lt;br&gt;2. 官方源码&lt;br&gt;3. yum/apt等包管理器&lt;br&gt;4. Mojo-ActivePerl&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.activestate.com/activeperl/downloads&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ActivePerl下载地址&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/sjdy521/Mojo-ActivePerl&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Mojo-ActivePerl下载地址&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Mac&lt;/td&gt;
&lt;td&gt;1. &lt;strong&gt;ActivePerl&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.activestate.com/activeperl/downloads&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ActivePerl下载地址&lt;/a&gt;｜&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;安装-Mojo-Weixin-模块&quot;&gt;&lt;a href=&quot;#安装-Mojo-Weixin-模块&quot; class=&quot;headerlink&quot; title=&quot;安装 Mojo::Weixin 模块&quot;&gt;&lt;/a&gt;安装 Mojo::Weixin 模块&lt;/h3&gt;&lt;p&gt;首先需要安装 cpanm 工具：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cpan -i App::cpanminus&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;然后通过 cpanm 工具安装 Mojo::Weixin&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cpanm Mojo::Weixin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;运行&quot;&gt;&lt;a href=&quot;#运行&quot; class=&quot;headerlink&quot; title=&quot;运行&quot;&gt;&lt;/a&gt;运行&lt;/h3&gt;&lt;p&gt;将如下代码使用utf－8编码保存为源码文件：&lt;/p&gt;
&lt;figure class=&quot;highlight perl&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#!/usr/bin/env perl&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; Mojo::Weixin;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;my&lt;/span&gt; ($host,$port,$post_api);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$host = &lt;span class=&quot;string&quot;&gt;&quot;0.0.0.0&quot;&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;#发送消息接口监听地址，修改为自己希望监听的地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$port = &lt;span class=&quot;number&quot;&gt;3000&lt;/span&gt;;      &lt;span class=&quot;comment&quot;&gt;#发送消息接口监听端口，修改为自己希望监听的端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#$post_api = &#39;http://xxxx&#39;;  #接收到的消息上报接口，如果不需要接收消息上报，可以删除或注释此行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;my&lt;/span&gt; $client = Mojo::Weixin-&amp;gt;new(&lt;span class=&quot;string&quot;&gt;log_level=&amp;gt;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;info&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;ua_debug=&amp;gt;&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;qrcode_path=&amp;gt;&lt;/span&gt;&lt;span class=&quot;string&quot;&gt;&quot;qrcode.jpg&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$client-&amp;gt;login();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$client-&amp;gt;load(&lt;span class=&quot;string&quot;&gt;&quot;ShowMsg&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$client-&amp;gt;load(&lt;span class=&quot;string&quot;&gt;&quot;Openwx&quot;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;data=&amp;gt;&lt;/span&gt;&amp;#123;&lt;span class=&quot;string&quot;&gt;listen=&amp;gt;&lt;/span&gt;[&amp;#123;&lt;span class=&quot;string&quot;&gt;host=&amp;gt;&lt;/span&gt;$host,&lt;span class=&quot;string&quot;&gt;port=&amp;gt;&lt;/span&gt;$port&amp;#125;], &lt;span class=&quot;string&quot;&gt;post_api=&amp;gt;&lt;/span&gt;$post_api&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$client-&amp;gt;run();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述代码保存为 &lt;code&gt;test.pl&lt;/code&gt; ， 并通过 perl 来运行：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;perl test.pl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后就会产生一个监听 3000 端口的 http 服务器。&lt;/p&gt;
&lt;p&gt;未竟事宜可以参考&lt;a href=&quot;https://github.com/sjdy521/Mojo-Weixin/blob/master/README.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;配置Nginx&quot;&gt;&lt;a href=&quot;#配置Nginx&quot; class=&quot;headerlink&quot; title=&quot;配置Nginx&quot;&gt;&lt;/a&gt;配置Nginx&lt;/h3&gt;&lt;p&gt;为了方便调用二维码，还需要配置一个 Web 服务器。安装Nginx，在配置文件中添加：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;server &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listen 80 default_server;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    listen [::]:80 default_server ipv6only=on;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    root /path/to/your/qrcode; # &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;最终，能在浏览器中以 &lt;code&gt;http://xxx.xxx.xxx.xxx/qrcode.jpg&lt;/code&gt; 的形式访问到二维码即配置成功。&lt;/p&gt;
&lt;h2 id=&quot;安装Qingchat&quot;&gt;&lt;a href=&quot;#安装Qingchat&quot; class=&quot;headerlink&quot; title=&quot;安装Qingchat&quot;&gt;&lt;/a&gt;安装Qingchat&lt;/h2&gt;&lt;h3 id=&quot;pip&quot;&gt;&lt;a href=&quot;#pip&quot; class=&quot;headerlink&quot; title=&quot;pip&quot;&gt;&lt;/a&gt;pip&lt;/h3&gt;&lt;p&gt;Qingchat已经上传到了pypi，只需要使用pip进行安装即可：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install qingchat&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;源码&quot;&gt;&lt;a href=&quot;#源码&quot; class=&quot;headerlink&quot; title=&quot;源码&quot;&gt;&lt;/a&gt;源码&lt;/h3&gt;&lt;p&gt;Qingchat最新开发版代码位于： &lt;a href=&quot;https://github.com/Xuanwo/qingchat/tree/dev&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/Xuanwo/qingchat/tree/dev&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;你可以使用&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install &lt;span class=&quot;_&quot;&gt;-e&lt;/span&gt; git+https://github.com/Xuanwo/qingchat/tree/dev&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;或&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/Xuanwo/qingchat/tree/dev&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; qingchat&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;python setup.py install&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以进行安装。&lt;/p&gt;
&lt;h2 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h2&gt;&lt;p&gt;Qingchat 的使用非常简单：&lt;/p&gt;
&lt;h3 id=&quot;配置-1&quot;&gt;&lt;a href=&quot;#配置-1&quot; class=&quot;headerlink&quot; title=&quot;配置&quot;&gt;&lt;/a&gt;配置&lt;/h3&gt;&lt;p&gt;通过如下命令配置后端服务器的 ip 地址和端口：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qingchat config ip &amp;lt;ip&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qingchat config port &amp;lt;port&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;配置文件默认会保存在&lt;code&gt;~/.config/qingchat/config.yml&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Win下可能需要设置&lt;code&gt;HOME&lt;/code&gt;环境变量才能正常运行&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;登陆&quot;&gt;&lt;a href=&quot;#登陆&quot; class=&quot;headerlink&quot; title=&quot;登陆&quot;&gt;&lt;/a&gt;登陆&lt;/h3&gt;&lt;p&gt;配置完毕后，执行&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qingchat config login&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;就会自动弹出一个二维码，使用微信扫描并登录后即可。如果出现问题，请再次执行此命令。&lt;/p&gt;
&lt;h3 id=&quot;群发消息&quot;&gt;&lt;a href=&quot;#群发消息&quot; class=&quot;headerlink&quot; title=&quot;群发消息&quot;&gt;&lt;/a&gt;群发消息&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qingchat group list&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此命令可以列出你保存到通讯录中的所有群组。&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qingchat group choose &amp;lt;group_name&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此命令可以将指定群组加入列表，支持正则&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qingchat group clean&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此命令可以清除列表&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;qingchat group send -t &amp;lt;content&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qingchat group send -i &amp;lt;media&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;qingchat group send &lt;span class=&quot;_&quot;&gt;-f&lt;/span&gt; &amp;lt;file&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt; 参数用于发送文本信息&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-i&lt;/code&gt; 参数用于发送媒体信息，图片会直接显示，其他类型将以文件形式传输&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-f&lt;/code&gt; 参数用于指定文件，逐行发送，在开头添加&lt;code&gt;!&lt;/code&gt;可以发送媒体信息&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;展望&quot;&gt;&lt;a href=&quot;#展望&quot; class=&quot;headerlink&quot; title=&quot;展望&quot;&gt;&lt;/a&gt;展望&lt;/h1&gt;&lt;p&gt;Qingchat 目前还处于开发阶段，功能不完善，BUG也很多，部署也相当麻烦。接下来，我将努力完成以下工作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更好的二维码呈现机制&lt;/li&gt;
&lt;li&gt;基于 Web 的图形化界面&lt;/li&gt;
&lt;li&gt;支持消息上报的 Server 端&lt;/li&gt;
&lt;li&gt;更多功能的实现，支持好友管理&amp;amp;群组管理等&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年04月01日 初次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;在我之前写过的一篇文章中，我曾经探索过类似的问题：&lt;a href=&quot;https://xuanwo.org/2016/02/28/wechat-remove/&quot;&gt;微信群重复人员识别&lt;/a&gt;。当初我就提出过能否自动获取相关数据，但因为种种原因的限制不了了之了。后来发现了&lt;a href=&quot;https://github.com/sjdy521/Mojo-Weixin&quot;&gt;Mojo-Weixin&lt;/a&gt;这个库之后，我决定在这个的基础上实现一个微信多群直播的工具——Qingchat。（&lt;em&gt;尽管在刚刚实现完不久，微信就更新了转发到多个群的功能，Sad。&lt;/em&gt;）探索的成果如下： &lt;a href=&quot;https://github.com/Xuanwo/qingchat&quot;&gt;Qingchat&lt;/a&gt;，目前仅支持 python3 ，欢迎各位看官提 issues ，交 code ，或者拍砖。&lt;br&gt;接下来我会先介绍一下 Qingchat 的原理，然后介绍 Qingchat 的使用，最后展望一下 Qingchat 未来的发展方向。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
  </entry>
  
  <entry>
    <title>罹患痛风感言</title>
    <link href="https://xuanwo.org/2016/03/13/gout/"/>
    <id>https://xuanwo.org/2016/03/13/gout/</id>
    <published>2016-03-13T13:44:00.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;p&gt;其实我很想写出获奖感言的感觉，但是痛风发作的时候真的好疼啊。。。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h1&gt;&lt;p&gt;从高中开始，中指的关节就一直有一些不明的肿胀，摸上去硬硬的，平时也不会痛，只是屈伸和握拳的时候有些困难。一直到了大学，我女朋友一直非常在意我的手，总是催我去医院看看。于是假期的时候，我跟我妈去医院挂了骨科，还拍了CT，但是医生却说骨头没有问题，关节也没异常，让我去别的科室看看。其实我是有些懵逼的，因为我原来预想的最差的结果就是动一下手术，然后休息个把个月。现在这种状况让我有些隐约的不妙，毕竟未知才是最可怕的东西。&lt;br&gt;因为对家乡的医院水平比较怀疑，所以到了北京之后又挂了北医三院的号，然后做了一堆检查，那个医生让我挂一个副教授的号= =，说他不能确定，以前没有见过。好吧，我再挂一个副教授的号。然后副教授告诉我他也不能确定，让我去做一个更厉害的测试（RMB800+）。等到下一次又挂上号之后，他告诉我有了这个单子之后就能确诊我是痛风了。然后叮嘱我不要吃海鲜和啤酒，要多注意饮食，多喝水，控制体内尿酸含量，然后开了一堆降低尿酸的药。&lt;/p&gt;
&lt;h1 id=&quot;服药&quot;&gt;&lt;a href=&quot;#服药&quot; class=&quot;headerlink&quot; title=&quot;服药&quot;&gt;&lt;/a&gt;服药&lt;/h1&gt;&lt;p&gt;收了药之后就开始了一段稳定的服药阶段，医生给我开了三种药：苯溴马隆，痛风定和碳酸氢钠片。 &lt;em&gt;当然，我也是后来才知道医生给我开的药的搭配合理之处，不过那个时候的我还不太了解，所以才有了之后的磨难。&lt;/em&gt; 苯溴马隆每天一片，痛风定每日三次，每次一片，碳酸氢钠每日三次，每次一片。那几天我基本上每天嘴巴里面都是药味，然后每天手里都捧着我的水杯喝个不停。主要的原因还是因为自己对于痛风以及伴随痛风而来的疼痛的恐惧，当然有些过激，但是现在感觉很有必要，只是那个时候还不是很明白。&lt;br&gt;除了吃药之外，每天的饮食也有一些变化，肉食倒是没有断，只是不再吃鱼了，这个让我那个喜欢吃鱼的女朋友非常难过。平时也不怎么喝酒，所以戒酒对于我来说倒是没有什么问题，反而多了一个可以合理拒绝敬酒的理由。&lt;br&gt;这种境况一直持续到我回家，我妈妈以及很多亲人都劝我不要再吃药了，主要的想法是这样的：这个病治不好的，吃药没有用，主要依靠饮食控制。很多药，比如苯溴马隆的副作用又很大，对肾不好等等。这么想也有道理，于是我就停了药，只是每天依然坚持多喝一些水。只是量没有达到医生的要求，医生当初给我开药的时候让我每天喝2.5升水，我在家的几天估计只喝了1升每天。&lt;/p&gt;
&lt;h1 id=&quot;发作&quot;&gt;&lt;a href=&quot;#发作&quot; class=&quot;headerlink&quot; title=&quot;发作&quot;&gt;&lt;/a&gt;发作&lt;/h1&gt;&lt;p&gt;再次开学之后，我已经停药大概一个月左右，身体没有发现任何异常，中指的关节还有一些变小的趋势，一切都在往好的方向发展。于是我做了一个现在挺后悔的决定：去打球。&lt;br&gt;第一次是周二，跟我的同学在一起打得。打得非常尽兴，由于很久没有运动，打完之后浑身酸软，第二天起床基本抬不起手的那种。我不是很明白这其中的机理，可能是运动产生的乳酸通过某种形式转化为了尿酸，然后沉积了起来。症状不明显，中指有些轻微发热而已，我以为是乳酸分解的正常现象，没有及时采取措施。然后周四晚上我又去跟公司里面的同事打球了，当然同样也很开心，虽说右手活动起来有些困难。回校之后，中指就开始以肉眼可见的速度肿胀起来。这个时候还没有觉得痛，只是行动稍微有些不便，跟女朋友说了之后，也只是让我好好休息，多喝喝水而已。一直到了周六的晚上，右手中指时不时地开始抽痛，左手食指的根部也开始红肿了起来，我有些紧张，开始大量喝茶，希望可以把尿酸都排出去。但，事与愿违。&lt;br&gt;到了周日的晚上，中指越来越严重的刺痛感已经让我完全睡不着觉了。那天晚上我抱着水杯通宵看完了 QG 与 Fnatic 的比赛（QG还输了，Sad），好不容易睡着之后，第二天发现情况并没有变好，反而感觉更加严重了——我完全没有办法忍受哪怕是穿衣服这种时候给我手指带来的疼痛感。没有办法，我打电话给我女朋友说明了情况，跟公司里面请了假，让舍友替我请假，全天呆在宿舍里面，只干一件事情——喝水。&lt;br&gt;那几天真的让我女朋友操碎了心，她把每种食物的嘌呤含量都背了下来，然后只给我买低嘌呤含量的东西送给我吃。但即使是这样，我的疼痛感也没有减轻很多。万般无奈之下，女朋友带我去挂了急诊，结果急诊的护士冷冰冰地告诉我们这个是痛风，让我们第二天来挂风湿免疫科。在好心人的指点下，我们去药房买了秋水仙碱，那个据说对缓解痛风急性发作由奇效的药。回去之后，我按照说明书，一个小时吃一片，吃了六个小时，但是感觉没有什么用。后来看了一个医生的博客，我采用了一次性吃两片，过一个小时之后再吃一片的策略。到了第二天，关节的肿痛有了很大的改善，配合上大量饮水，基本上已经可以正常生活了。&lt;/p&gt;
&lt;h1 id=&quot;尾声&quot;&gt;&lt;a href=&quot;#尾声&quot; class=&quot;headerlink&quot; title=&quot;尾声&quot;&gt;&lt;/a&gt;尾声&lt;/h1&gt;&lt;p&gt;秋水仙碱作为一个剧毒物果然名不虚传，我被它的药效支配了很久，在我们宿舍的门口把我吃的一整碗炒饭全都吐了出来。不仅如此，我还腹泻了好几天，基本上没过多久就要上一次大号。&lt;br&gt;时至今日，我的左手食指根红肿已经全部退去，右手中指关节还有些肿，但是已经不会再有抽痛感，已经可以恢复正常生活了。&lt;/p&gt;
&lt;h1 id=&quot;致谢&quot;&gt;&lt;a href=&quot;#致谢&quot; class=&quot;headerlink&quot; title=&quot;致谢&quot;&gt;&lt;/a&gt;致谢&lt;/h1&gt;&lt;p&gt;首先要非常感谢我女朋友对我的无微不至的照顾（尽管她并不看我的博客），她记下了每一种食物的嘌呤含量，专门买了PH值8.0的苏打水给我喝，如果没有她的帮助和支持，我不知道如何度过噩梦般的那几天；其次要感谢我的室友，他们帮我带饭，帮我请假，帮我穿衣服（恩- -，只是外套而已），在我呕吐之后替我打扫，喂我喝水甚至包括帮我开矿泉水的瓶盖和拉开宿舍的门等等，没有他们的话，我可能真的就只能躺在床上什么都做不了了；最后要感谢公司的同事们承担了本来属于我的工作，只对我说一句好好休息而已。&lt;br&gt;非常感谢你们，你们是我在那几天痛苦的回忆里面唯一的亮色。&lt;/p&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;痛风发作是一件非常痛苦的事情，所以平时各位一定要注意饮食，养成良好的习惯，有条件的话定期去医院做检查，将疾病扼杀在摇篮之中。&lt;/p&gt;
&lt;p&gt;即使患上了痛风，也不要自暴自弃，控制饮食，合理用药，完全可以保证以后不再发作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;痛风急性发作时：服用秋水仙碱（一次性两片，过一个小时后再服一片，如果不见好转，12小时后再服一片）和止疼药（布洛芬等等）&lt;/li&gt;
&lt;li&gt;痛风间歇期时：服用苯溴马隆（一天一片）以促进尿酸排泄，碳酸氢钠（碱化尿液，便于尿酸排出）&lt;/li&gt;
&lt;li&gt;长期用药：别嘌呤醇（副作用大），痛风定非布索坦（副作用小，但极贵），痛风定胶囊（中药，可减少嘌呤生成）&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年03月13日 首次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;其实我很想写出获奖感言的感觉，但是痛风发作的时候真的好疼啊。。。&lt;/p&gt;
    
    </summary>
    
      <category term="Daily" scheme="https://xuanwo.org/categories/Daily/"/>
    
    
  </entry>
  
  <entry>
    <title>Neovim慢速升级攻略</title>
    <link href="https://xuanwo.org/2016/03/12/neovim-slow-upgrade/"/>
    <id>https://xuanwo.org/2016/03/12/neovim-slow-upgrade/</id>
    <published>2016-03-12T11:00:00.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;一直都非常羡慕那些能把vim用得非常溜的人，但是自己总是不情愿去学，总是觉得vim的操作方式非常反人类，难度曲线太陡，不适合我。真正让我下定决心去学的，是因为系统切换到Ubuntu Gnome之后发现，Sublime Text 3 不能原生支持中文输入。同时我也发现，如果我不上来就折腾spf13这样的东西的话，其实vim非常好懂。于是，Neovim的慢速升级攻略就这样诞生了。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;p&gt;安装可以参考&lt;a href=&quot;https://github.com/neovim/neovim/wiki/Installing-Neovim&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;br&gt;如果是Ubuntu 的话，则可以执行如下代码：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo add-apt-repository ppa:neovim-ppa/unstable&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install neovim&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;Neovim常用操作&quot;&gt;&lt;a href=&quot;#Neovim常用操作&quot; class=&quot;headerlink&quot; title=&quot;Neovim常用操作&quot;&gt;&lt;/a&gt;Neovim常用操作&lt;/h1&gt;&lt;h2 id=&quot;初步&quot;&gt;&lt;a href=&quot;#初步&quot; class=&quot;headerlink&quot; title=&quot;初步&quot;&gt;&lt;/a&gt;初步&lt;/h2&gt;&lt;h3 id=&quot;光标移动&quot;&gt;&lt;a href=&quot;#光标移动&quot; class=&quot;headerlink&quot; title=&quot;光标移动&quot;&gt;&lt;/a&gt;光标移动&lt;/h3&gt;&lt;h3 id=&quot;文件操作相关&quot;&gt;&lt;a href=&quot;#文件操作相关&quot; class=&quot;headerlink&quot; title=&quot;文件操作相关&quot;&gt;&lt;/a&gt;文件操作相关&lt;/h3&gt;&lt;p&gt;&lt;code&gt;:w &amp;lt;filename&amp;gt;&lt;/code&gt; 按照&lt;filename&gt;保存文件&lt;br&gt;&lt;code&gt;:wq&lt;/code&gt; 保存并退出&lt;br&gt;&lt;code&gt;:q!&lt;/code&gt; 退出不保存&lt;br&gt;&lt;code&gt;:e&lt;/code&gt; 打开新的文件并关闭当前文件，使用Tab可以补全&lt;/filename&gt;&lt;/p&gt;
&lt;h3 id=&quot;文件编辑相关&quot;&gt;&lt;a href=&quot;#文件编辑相关&quot; class=&quot;headerlink&quot; title=&quot;文件编辑相关&quot;&gt;&lt;/a&gt;文件编辑相关&lt;/h3&gt;&lt;p&gt;&lt;code&gt;dd&lt;/code&gt; 删除当前行&lt;br&gt;&lt;code&gt;y&lt;/code&gt; 复制&lt;br&gt;&lt;code&gt;yy&lt;/code&gt; 复制当前行&lt;br&gt;&lt;code&gt;yG&lt;/code&gt; 复制光标以上全部行&lt;br&gt;&lt;code&gt;ygg&lt;/code&gt; 复制光标以下全部行&lt;br&gt;&lt;code&gt;p&lt;/code&gt; 粘贴&lt;br&gt;&lt;code&gt;u&lt;/code&gt; 撤销&lt;/p&gt;
&lt;h2 id=&quot;入门&quot;&gt;&lt;a href=&quot;#入门&quot; class=&quot;headerlink&quot; title=&quot;入门&quot;&gt;&lt;/a&gt;入门&lt;/h2&gt;&lt;h3 id=&quot;使用内置终端&quot;&gt;&lt;a href=&quot;#使用内置终端&quot; class=&quot;headerlink&quot; title=&quot;使用内置终端&quot;&gt;&lt;/a&gt;使用内置终端&lt;/h3&gt;&lt;p&gt;&lt;code&gt;:terminal&lt;/code&gt; 打开终端，输入exit并使用esc即可退出&lt;/p&gt;
&lt;h3 id=&quot;与系统剪切板集成&quot;&gt;&lt;a href=&quot;#与系统剪切板集成&quot; class=&quot;headerlink&quot; title=&quot;与系统剪切板集成&quot;&gt;&lt;/a&gt;与系统剪切板集成&lt;/h3&gt;&lt;p&gt;这个地方折腾了好久，Neovim默认是支持&lt;code&gt;+&lt;/code&gt;寄存器的，但是我通过&lt;code&gt;&amp;quot;+y&lt;/code&gt;命令调用寄存器时却提示&lt;code&gt;Clipboard No Provider&lt;/code&gt;。通过阅读&lt;a href=&quot;https://github.com/neovim/neovim/blob/master/runtime/doc/nvim_clipboard.txt#L19-L27&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文档&lt;/a&gt;之后，我得知，必须要安装下列三个包中的至少一个，才能正常使用剪切板：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;xclip&lt;/li&gt;
&lt;li&gt;xsel (newer alternative to xclip)&lt;/li&gt;
&lt;li&gt;pbcopy/pbpaste (only for Mac OS X)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;安装好之后再打开，就可以正常使用了。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;快速复制全文的技巧： 在Normal模式下，&lt;code&gt;gg&lt;/code&gt;跳转到文章开头，&lt;code&gt;VG&lt;/code&gt;选中全文，&lt;code&gt;&amp;quot;+y&lt;/code&gt;复制到剪切板。&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&quot;Neovim插件&quot;&gt;&lt;a href=&quot;#Neovim插件&quot; class=&quot;headerlink&quot; title=&quot;Neovim插件&quot;&gt;&lt;/a&gt;Neovim插件&lt;/h1&gt;&lt;h2 id=&quot;vim-airline&quot;&gt;&lt;a href=&quot;#vim-airline&quot; class=&quot;headerlink&quot; title=&quot;vim-airline&quot;&gt;&lt;/a&gt;vim-airline&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/vim-airline/vim-airline&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;vim-airline&lt;/a&gt;是一个vim的状态栏插件，同样支持neovim。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://github.com/vim-airline/vim-airline/wiki/screenshots/demo.gif&quot; alt=&quot;vim-airline demo&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;安装此插件后启动nvim会报错，自行编译后错误消失，不知道具体的原因。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Smarter-tab-line&quot;&gt;&lt;a href=&quot;#Smarter-tab-line&quot; class=&quot;headerlink&quot; title=&quot;Smarter tab line&quot;&gt;&lt;/a&gt;Smarter tab line&lt;/h3&gt;&lt;p&gt;在&lt;code&gt;init.vim&lt;/code&gt;中加入&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;apos; 开启tabline功能&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;let g:airline#extensions#tabline#enabled = 1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;apos; 设置tabline分隔符&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;let g:airline#extensions#tabline#left_sep = &amp;apos; &amp;apos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;let g:airline#extensions#tabline#left_alt_sep = &amp;apos;|&amp;apos;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;支持的一些快捷操作命令：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:bn&lt;/code&gt;: 跳转下一个buffer&lt;br&gt;&lt;code&gt;:bp&lt;/code&gt;: 往上一个buffer&lt;br&gt;&lt;code&gt;:b&amp;lt;n&amp;gt;&lt;/code&gt;: 跳往第n个buffer&lt;br&gt;&lt;code&gt;:bd&lt;/code&gt;: 关掉目前buffer&lt;/p&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年03月12日 首次发布&lt;/li&gt;
&lt;li&gt;2016年03月15日 增加air-line相关内容&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;一直都非常羡慕那些能把vim用得非常溜的人，但是自己总是不情愿去学，总是觉得vim的操作方式非常反人类，难度曲线太陡，不适合我。真正让我下定决心去学的，是因为系统切换到Ubuntu Gnome之后发现，Sublime Text 3 不能原生支持中文输入。同时我也发现，如果我不上来就折腾spf13这样的东西的话，其实vim非常好懂。于是，Neovim的慢速升级攻略就这样诞生了。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="vim" scheme="https://xuanwo.org/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>微信群重复人员识别</title>
    <link href="https://xuanwo.org/2016/02/28/wechat-remove/"/>
    <id>https://xuanwo.org/2016/02/28/wechat-remove/</id>
    <published>2016-02-28T10:05:00.000Z</published>
    <updated>2016-04-18T06:43:21.546Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;由于微信的限制，人数超过一百以后，只有邀请才能加入。所以，如果想要组织大型的在线活动，就只有建立很多个分群。然而分群的问题在于，会有很多人重复加群，挤占了本来就缺乏的空间。所以需要找到一个可行的办法，清除两个群中的重复人员。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;可行的方法&quot;&gt;&lt;a href=&quot;#可行的方法&quot; class=&quot;headerlink&quot; title=&quot;可行的方法&quot;&gt;&lt;/a&gt;可行的方法&lt;/h1&gt;&lt;p&gt;在微信网页版中，通过点击群名称右侧的向下箭头，可以打开一个有所有人昵称的面板，通过审查工具可以得到对应的代码，右击选择&lt;code&gt;Edit As HTML&lt;/code&gt;，全选复制，保存到&lt;code&gt;a.txt&lt;/code&gt;中，然后执行&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cat a.txt | grep -o &lt;span class=&quot;string&quot;&gt;&quot;\&quot;&amp;gt;.*&amp;lt;/p&amp;gt;&quot;&lt;/span&gt; &amp;gt; fen.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我们便可以将所有人的名字都输出到&lt;code&gt;fen.txt&lt;/code&gt;中，尽管还有着一些&lt;code&gt;&amp;lt;&lt;/code&gt;，&lt;code&gt;&amp;gt;&lt;/code&gt;的符号，但是已经不影响识别了，故不再做处理。&lt;/p&gt;
&lt;p&gt;对两个群分别如此操作之后，我们得到了两个群的成员名单。&lt;br&gt;然后执行如下Python代码：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;with open(&amp;apos;fen.txt&amp;apos;, &amp;apos;r&amp;apos;) as f:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    fen = f.readlines()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    f.close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;with open(&amp;apos;main.txt&amp;apos;, &amp;apos;r&amp;apos;) as f:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    main = f.readlines()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    f.close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;for i in main:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    for j in fen:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if i == j:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            print(i)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;得到的输出就是两个群中重复的成员，然后一一删除即可。&lt;/p&gt;
&lt;h1 id=&quot;方案反思&quot;&gt;&lt;a href=&quot;#方案反思&quot; class=&quot;headerlink&quot; title=&quot;方案反思&quot;&gt;&lt;/a&gt;方案反思&lt;/h1&gt;&lt;h2 id=&quot;存在的缺陷&quot;&gt;&lt;a href=&quot;#存在的缺陷&quot; class=&quot;headerlink&quot; title=&quot;存在的缺陷&quot;&gt;&lt;/a&gt;存在的缺陷&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;自动化程度较低&lt;/li&gt;
&lt;li&gt;如果存在用户同名的话，会导致删除错误的用户。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;可能的改进&quot;&gt;&lt;a href=&quot;#可能的改进&quot; class=&quot;headerlink&quot; title=&quot;可能的改进&quot;&gt;&lt;/a&gt;可能的改进&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;获取资料不需要手动点击审查元素，通过jQuery的text()函数也可以实现。&lt;/li&gt;
&lt;li&gt;最后实现删除的过程可以进一步优化，通过模拟用户点击的脚本实现（存在隐私泄漏风险）。&lt;/li&gt;
&lt;li&gt;可以获取用户的UUID，以避免重名现象。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年02月28日  首次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;由于微信的限制，人数超过一百以后，只有邀请才能加入。所以，如果想要组织大型的在线活动，就只有建立很多个分群。然而分群的问题在于，会有很多人重复加群，挤占了本来就缺乏的空间。所以需要找到一个可行的办法，清除两个群中的重复人员。&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="微信" scheme="https://xuanwo.org/tags/%E5%BE%AE%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>记一次debug的经历及反思</title>
    <link href="https://xuanwo.org/2016/02/26/debug-for-hexo-1775/"/>
    <id>https://xuanwo.org/2016/02/26/debug-for-hexo-1775/</id>
    <published>2016-02-26T12:54:00.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h2 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/hexojs/hexo/issues/1775&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hexojs/hexo #1775&lt;/a&gt;&lt;br&gt;BUG非常明显，在使用hexo 3.1.1搭建一个位于子目录下的博客，然后会发现home以及categories的链接全都忽略了子目录的设定。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;经过&quot;&gt;&lt;a href=&quot;#经过&quot; class=&quot;headerlink&quot; title=&quot;经过&quot;&gt;&lt;/a&gt;经过&lt;/h2&gt;&lt;p&gt;收到反馈之后，我在我的测试环境中也复现了这个bug。一开始还怀疑是主题的问题，专门测试了next主题，结果发现也存在这样的问题，于是就排除了主题方面的bug。&lt;br&gt;首先我们可以初步判断这个url生成出现了问题，参考landscape主题中此处的代码：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;% for (var i in theme.menu)&amp;#123; %&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;a class=&amp;quot;main-nav-link&amp;quot; href=&amp;quot;&amp;lt;%- url_for(theme.menu[i]) %&amp;gt;&amp;quot;&amp;gt;&amp;lt;%= i %&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;% &amp;#125; %&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;这里调用了一个&lt;code&gt;url_for&lt;/code&gt;函数来生成超链接，代码如下（去除了与本BUG无关的部分）：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;function urlForHelper(path, options) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  path = path || &amp;apos;/&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (path[0] === &amp;apos;#&amp;apos; || path.substring(0, 2) === &amp;apos;//&amp;apos;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  var config = this.config;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  var root = config.root;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  var data = url.parse(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // Exit if this is an external path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (data.protocol) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // Prepend root path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  path = root + path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return path.replace(/\/&amp;#123;2,&amp;#125;/g, &amp;apos;/&amp;apos;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;直觉告诉我，这个问题很有可能就是这个函数写搓了。&lt;/p&gt;
&lt;p&gt;然而我仔细研究了一下，发现&lt;code&gt;url_for&lt;/code&gt;的逻辑并没有什么问题。而且根据我脑补的代码执行情况来看，应该生成一个正确的链接才对，但是&lt;code&gt;config.root&lt;/code&gt;偏偏就丢了。&lt;br&gt;真的是非常奇怪，一时之间，我完全懵逼展开了，不明白到底发生了什么。&lt;/p&gt;
&lt;h2 id=&quot;转折&quot;&gt;&lt;a href=&quot;#转折&quot; class=&quot;headerlink&quot; title=&quot;转折&quot;&gt;&lt;/a&gt;转折&lt;/h2&gt;&lt;p&gt;后来我跟我的朋友聊天的时候提到这个bug，结果他告诉我，这个&lt;code&gt;url_for&lt;/code&gt;写搓了，我点点头，应该就是这样。然后他说，一个判断都没有中，直接返回自身了，还贴了一张图。图中的代码大致如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;function urlForHelper(path, options)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  /* jshint validthis: true */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  path = path || &amp;apos;/&amp;apos;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  var config = this.config;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  var root = config.root;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  var data = url.parse(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // Exit if this is an external path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (data.protocol || path.substring(0, 2) === &amp;apos;//&amp;apos;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  // Prepend root path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  if (path[0] !== &amp;apos;/&amp;apos;)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return root + path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;看到图我立马懵逼了，连忙说，不对啊，你这个不是最新版本的代码。他被我这气场吓到，弱弱回复，我是刚安装的hexo…。&lt;br&gt;我顿时明白自己错在哪里了，npm源里面的稳定版还是3.1.1，但是我们github库中的代码已经是3.2beta了。使用最新的代码测试以后，发现这个bug已经不存在了。&lt;br&gt;也就是说，我花一个下午的时间，对着最新版的代码找一个已经被fix的bug…&lt;/p&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;这一次的事情非常乌龙，事后想想觉得自己真的太傻逼了。&lt;br&gt;吃一堑长一智，以后做debug工作的时候一定要分清楚线上和线下的代码，首先就要明确出问题的是哪个版本，然后再开展相应的分析。&lt;br&gt;除此以外，还跟我不重视流程有关系。尽管我总是让人提供各种version信息，但是我却总是在分析问题的时候忽略这些信息，没有把这些关键的信息加入到自己的分析过程中。&lt;br&gt;总结起来就是，too young ，姿势水平还有待提高。&lt;/p&gt;
&lt;h2 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;2016年02月26日 初次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/hexojs/hexo/issues/1775&quot;&gt;hexojs/hexo #1775&lt;/a&gt;&lt;br&gt;BUG非常明显，在使用hexo 3.1.1搭建一个位于子目录下的博客，然后会发现home以及categories的链接全都忽略了子目录的设定。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
      <category term="Hexo" scheme="https://xuanwo.org/tags/Hexo/"/>
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="Nodejs" scheme="https://xuanwo.org/tags/Nodejs/"/>
    
  </entry>
  
  <entry>
    <title>北地网费新政策下的生存攻略</title>
    <link href="https://xuanwo.org/2016/02/17/ipv6-in-cugb/"/>
    <id>https://xuanwo.org/2016/02/17/ipv6-in-cugb/</id>
    <published>2016-02-17T18:59:02.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;p&gt;主旨只有两条：开源，节流&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;开源&quot;&gt;&lt;a href=&quot;#开源&quot; class=&quot;headerlink&quot; title=&quot;开源&quot;&gt;&lt;/a&gt;开源&lt;/h1&gt;&lt;p&gt;根据国家推广ipv6应用的相关规定，IPv6的流量依然是不计费的，所以我们需要充分利用IPv6的广泛资源。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;互联网通讯协议第6版（英文：Internet Protocol version 6，缩写：IPv6）是互联网协议的最新版本，用于分组交换互联网络的网络层协议，旨在解决IPv4地址枯竭问题。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;如何开启ipv6&quot;&gt;&lt;a href=&quot;#如何开启ipv6&quot; class=&quot;headerlink&quot; title=&quot;如何开启ipv6&quot;&gt;&lt;/a&gt;如何开启ipv6&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;下面内容仅适用于&lt;strong&gt;地大校园有线网&lt;/strong&gt;，不适用于CUGBNET，不适用于绝大多数USB网卡。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;检查自己的电脑是否已经打开ipv6支持&quot;&gt;&lt;a href=&quot;#检查自己的电脑是否已经打开ipv6支持&quot; class=&quot;headerlink&quot; title=&quot;检查自己的电脑是否已经打开ipv6支持&quot;&gt;&lt;/a&gt;检查自己的电脑是否已经打开ipv6支持&lt;/h3&gt;&lt;p&gt;打开浏览器访问： &lt;a href=&quot;http://test-ipv6.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://test-ipv6.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果所有项目都显示为绿勾，说明你已经可以正常使用IPv6了，如果有红叉，则需要打开系统对IPv6的支持&lt;/p&gt;
&lt;h3 id=&quot;打开ipv6&quot;&gt;&lt;a href=&quot;#打开ipv6&quot; class=&quot;headerlink&quot; title=&quot;打开ipv6&quot;&gt;&lt;/a&gt;打开ipv6&lt;/h3&gt;&lt;p&gt;Win + R 快捷键调出“运行”对话框，输入“ncpa.cpl”。如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/ipv6-1.png&quot; alt=&quot;Win+R&quot;&gt;&lt;/p&gt;
&lt;p&gt;回车后打开网络连接，在&lt;code&gt;以太网&lt;/code&gt;上右击，选择最后一项&lt;code&gt;属性&lt;/code&gt;，打开以太网属性，如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/ipv6-2.png&quot; alt=&quot;以太网属性&quot;&gt;&lt;/p&gt;
&lt;p&gt;向下浏览，确保&lt;code&gt;TCP/IPv6&lt;/code&gt;这一项已经被选中。&lt;/p&gt;
&lt;p&gt;然后使用&lt;a href=&quot;http://gate.cugbteam.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此网址&lt;/a&gt;登陆，深澜自带的登录器貌似有BUG，IPv6不会进行拨号。&lt;/p&gt;
&lt;h2 id=&quot;IPv6应用&quot;&gt;&lt;a href=&quot;#IPv6应用&quot; class=&quot;headerlink&quot; title=&quot;IPv6应用&quot;&gt;&lt;/a&gt;IPv6应用&lt;/h2&gt;&lt;h3 id=&quot;PT下载&quot;&gt;&lt;a href=&quot;#PT下载&quot; class=&quot;headerlink&quot; title=&quot;PT下载&quot;&gt;&lt;/a&gt;PT下载&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;PT（Private Tracker）是一种改良自BitTorrent协议的P2P下载方式，“Private Tracker”指私有种子服务器。与BT最大的不同点分别为可进行私密范围下载，及可统计每个用户的上传及下载量。&lt;br&gt;PT可进行私密范围下载，因此提供PT的讨论区大多非公开的，采用邀请制或是不定时开放注册。用户注册后会得到一个passkey，因此可借由passkey辨识每个用户，用户从某PT站下载种子后，该种子即带有用户的passkey。因此PT的种子是不可外流到其他地方，且不允许一个用户有过多IP（通常上限为3个IP）同时上下传。&lt;br&gt;为了控制用户数量，关闭自由注册的PT网站一般采用邀请码制度，由已注册的用户向自己所信任的人发送邀请，以确保用户质量。&lt;br&gt;借由这些机制，传统P2P下载常发生一些client端只下载而不分享上传的“吸血”行为将可杜绝。而BT种子在一两周后做种者大幅减少，以致后来下载者无法顺利完档的缺点在PT获得改善。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在教育网中，由于IPv6没有带宽和流量限制，所以PT下载得到了极大的发展。相对于IPv4下的下载，PT下载通常有以下优点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;下载速度飞快，没有上限。在宿舍可以达到10M/s，在实验室可以达到100M/s。&lt;/li&gt;
&lt;li&gt;国家正在推广IPv6，故IPv6不进行计费，所有IPv6的流量都是免费的。&lt;/li&gt;
&lt;li&gt;资源丰富。由于PT站的私密特性，很多资源都保存地非常好，新的资源也更新地非常及时。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;老司机友情提醒，欲求先予，如果只下载不上传的话，很容易被删号的。在加入一个PT站的时候一定要先阅读PT站的说明，谨防封号。每个PT站基本都有着邀请制度，需要使用邀请码才能进入。&lt;/p&gt;
&lt;p&gt;下面给出一些常用的PT站：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://pt.cugb.edu.cn&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;北地PT&lt;/a&gt; &lt;em&gt;无需邀请，荒废多年，不过借这波机会应该会复苏了~&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://bt.byr.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;北邮人PT&lt;/a&gt; &lt;em&gt;我校IPv6入口就在北邮，速度相当快，资源也很多，非常活跃&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://bt.neu6.edu.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;六维空间&lt;/a&gt; &lt;em&gt;应当是教育网最大的PT站了，资源最多，非常活跃&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;推荐的PT下载工具：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ll.www.utorrent.com/intl/en/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;utorrent&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.bittorrent.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;bittorrent&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;绝对禁止使用迅雷下载，严重者可能导致封号。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;IPv6电视&quot;&gt;&lt;a href=&quot;#IPv6电视&quot; class=&quot;headerlink&quot; title=&quot;IPv6电视&quot;&gt;&lt;/a&gt;IPv6电视&lt;/h3&gt;&lt;p&gt;IPv6电视就相对显得比较简单易懂了，直接在线收看即可，不消耗IPv4流量。&lt;/p&gt;
&lt;p&gt;下面同样给出一些地址：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ipv6.pku.edu.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;北京大学IPv6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://tv.byr.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;北京邮电大学IPv6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://iptv.pdsu6.edu.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IPv6电视直播墙&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;IPv6转换&quot;&gt;&lt;a href=&quot;#IPv6转换&quot; class=&quot;headerlink&quot; title=&quot;IPv6转换&quot;&gt;&lt;/a&gt;IPv6转换&lt;/h3&gt;&lt;p&gt;当然也可以通过将IPv4流量转换为IPv6来逃开计费。&lt;/p&gt;
&lt;p&gt;需要安装&lt;a href=&quot;http://www.6kuaibo.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;六快拨浏览器&lt;/a&gt;，使用该浏览器即可免费上网。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;利益无关，没有测试，不知速度如何。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;节流&quot;&gt;&lt;a href=&quot;#节流&quot; class=&quot;headerlink&quot; title=&quot;节流&quot;&gt;&lt;/a&gt;节流&lt;/h1&gt;&lt;h2 id=&quot;网络游戏流量消耗&quot;&gt;&lt;a href=&quot;#网络游戏流量消耗&quot; class=&quot;headerlink&quot; title=&quot;网络游戏流量消耗&quot;&gt;&lt;/a&gt;网络游戏流量消耗&lt;/h2&gt;&lt;p&gt;网络游戏耗费的流量不多，比如英雄联盟，一分钟只消耗一兆不到。所以玩游戏的童鞋们大可放心，按照每天撸三个小时来算，也不过是5.4G不到而已，不慌。&lt;/p&gt;
&lt;h2 id=&quot;内网文件传输&quot;&gt;&lt;a href=&quot;#内网文件传输&quot; class=&quot;headerlink&quot; title=&quot;内网文件传输&quot;&gt;&lt;/a&gt;内网文件传输&lt;/h2&gt;&lt;p&gt;可以用&lt;a href=&quot;http://www.ipmsg.org.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;飞鸽传书&lt;/a&gt;，如果不放心可以在不登录网关的时候传输文件，只需要对方也安装了飞鸽传书即可。&lt;/p&gt;
&lt;h1 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h1&gt;&lt;p&gt;在充分利用ipv6资源并辅以适当的节流方式下，可以将网费控制在20元(25G)以下。所以童鞋们大可不必惊慌。我的想法是，付费可以，但是请地大提供更加优秀的网络环境。&lt;/p&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/IPv6&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;IPv6&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/PT%E4%B8%8B%E8%BC%89&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PT下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年02月17日 初次发布&lt;/li&gt;
&lt;li&gt;2016年02月20日 修复网关登录链接，补充PT下载工具&lt;/li&gt;
&lt;li&gt;2016年03月11日 修复北京邮电大学IPv6电视链接&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;主旨只有两条：开源，节流&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="CUGB" scheme="https://xuanwo.org/tags/CUGB/"/>
    
  </entry>
  
  <entry>
    <title>Chocolatey——Windows下的包管理工具</title>
    <link href="https://xuanwo.org/2016/02/15/chocolatey-intro/"/>
    <id>https://xuanwo.org/2016/02/15/chocolatey-intro/</id>
    <published>2016-02-15T20:15:46.000Z</published>
    <updated>2016-04-18T06:43:21.538Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://chocolatey.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Chocolatey&lt;/a&gt;是一个基于Nuget的Windows包管理工具，截止到我更新此文章的时候，一共有3.7k多个独立包。本文旨在介绍Chocolatey这一工具的安装和用法，希望能有更多人享受到该工具的便利之处。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;安装chocolatey&quot;&gt;&lt;a href=&quot;#安装chocolatey&quot; class=&quot;headerlink&quot; title=&quot;安装chocolatey&quot;&gt;&lt;/a&gt;安装chocolatey&lt;/h1&gt;&lt;h2 id=&quot;CMD&quot;&gt;&lt;a href=&quot;#CMD&quot; class=&quot;headerlink&quot; title=&quot;CMD&quot;&gt;&lt;/a&gt;CMD&lt;/h2&gt;&lt;p&gt;打开一个具有管理员权限的命令行窗口，执行如下命令：&lt;br&gt;&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@powershell -NoProfile -ExecutionPolicy Bypass -Command &lt;span class=&quot;string&quot;&gt;&quot;iex ((new-object net.webclient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))&quot;&lt;/span&gt; &amp;amp;&amp;amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;PowerShell&quot;&gt;&lt;a href=&quot;#PowerShell&quot; class=&quot;headerlink&quot; title=&quot;PowerShell&quot;&gt;&lt;/a&gt;PowerShell&lt;/h2&gt;&lt;p&gt;打开一个具有管理员权限的PowerShell窗口，执行如下命令：&lt;br&gt;&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;iex ((&lt;span class=&quot;built_in&quot;&gt;new-object&lt;/span&gt; net.webclient).DownloadString(&lt;span class=&quot;string&quot;&gt;&#39;https://chocolatey.org/install.ps1&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;使用chocolatey&quot;&gt;&lt;a href=&quot;#使用chocolatey&quot; class=&quot;headerlink&quot; title=&quot;使用chocolatey&quot;&gt;&lt;/a&gt;使用chocolatey&lt;/h1&gt;&lt;h2 id=&quot;安装包&quot;&gt;&lt;a href=&quot;#安装包&quot; class=&quot;headerlink&quot; title=&quot;安装包&quot;&gt;&lt;/a&gt;安装包&lt;/h2&gt;&lt;p&gt;安装包十分的容易，只需要打开管理员权限的命令行即可：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;choco install &amp;lt;package&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;卸载包&quot;&gt;&lt;a href=&quot;#卸载包&quot; class=&quot;headerlink&quot; title=&quot;卸载包&quot;&gt;&lt;/a&gt;卸载包&lt;/h2&gt;&lt;p&gt;卸载也同样十分简单，打开管理员权限命令行，执行：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;choco uninstall &amp;lt;package&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;更新包&quot;&gt;&lt;a href=&quot;#更新包&quot; class=&quot;headerlink&quot; title=&quot;更新包&quot;&gt;&lt;/a&gt;更新包&lt;/h2&gt;&lt;p&gt;更新包则需要使用如下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;choco upgrade &amp;lt;package&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;为chocolatey做贡献&quot;&gt;&lt;a href=&quot;#为chocolatey做贡献&quot; class=&quot;headerlink&quot; title=&quot;为chocolatey做贡献&quot;&gt;&lt;/a&gt;为chocolatey做贡献&lt;/h1&gt;&lt;p&gt;Chocolatey的一个特点就是社区化的环境，每一个人都可以向它提交自己喜爱的包。因为Chocolatey总是从官方下载所需要的包，所以避免了授权等问题。当然，本来收费的软件，同样需要收费，比如JetBrains系列的产品。&lt;/p&gt;
&lt;h2 id=&quot;注册APIKey&quot;&gt;&lt;a href=&quot;#注册APIKey&quot; class=&quot;headerlink&quot; title=&quot;注册APIKey&quot;&gt;&lt;/a&gt;注册APIKey&lt;/h2&gt;&lt;p&gt;提交包则会略为复杂一点，首先你需要在&lt;a href=&quot;https://chocolatey.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://chocolatey.org/&lt;/a&gt; 注册一个账号，并获取跟你账户绑定的唯一APIKey。然后在命令行中执行如下命令：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;choco apikey -k &amp;lt;your key here&amp;gt; -s https://chocolatey.org&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;新建软件包&quot;&gt;&lt;a href=&quot;#新建软件包&quot; class=&quot;headerlink&quot; title=&quot;新建软件包&quot;&gt;&lt;/a&gt;新建软件包&lt;/h2&gt;&lt;p&gt;在命令行中运行&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;choco new &amp;lt;package name here&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 为方便理解，此处使用test做包名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;则当前目录下就会自动生成一个名为&lt;code&gt;test&lt;/code&gt;的文件夹，目录结构如下：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;test.nuspec&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tools&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  |--chocolateyinstall.ps1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  |--chocolateyuninstall.ps1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  |--ReadMe.md&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;完善信息&quot;&gt;&lt;a href=&quot;#完善信息&quot; class=&quot;headerlink&quot; title=&quot;完善信息&quot;&gt;&lt;/a&gt;完善信息&lt;/h2&gt;&lt;h3 id=&quot;修改test-nuspec&quot;&gt;&lt;a href=&quot;#修改test-nuspec&quot; class=&quot;headerlink&quot; title=&quot;修改test.nuspec&quot;&gt;&lt;/a&gt;修改test.nuspec&lt;/h3&gt;&lt;p&gt;自动生成的描述文件在需要填写的位置都有大写英文注释，只需要按照要求一一填写即可，下面我列举一份已经通过审核的Datagrip的描述文件作为参考：&lt;/p&gt;
&lt;figure class=&quot;highlight xml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Do not remove this test for UTF-8: if “Ω” doesn’t appear as greek uppercase omega letter enclosed in quotation marks, you should use an editor that supports UTF-8, not this one. --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;xmlns&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;http://schemas.microsoft.com/packaging/2015/06/nuspec.xsd&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;metadata&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!-- Read this before publishing packages to chocolatey.org: https://github.com/chocolatey/chocolatey/wiki/CreatePackages --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;datagrip&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;id&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;DataGrip&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;1.0.1&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;authors&lt;/span&gt;&amp;gt;&lt;/span&gt;JetBrains&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;authors&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;owners&lt;/span&gt;&amp;gt;&lt;/span&gt;Xuanwo&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;owners&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;summary&lt;/span&gt;&amp;gt;&lt;/span&gt;Your Swiss Army Knife for Databases and SQL&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;summary&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;## Intelligent query console&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Allows you to execute queries in different modes and provides local history that keeps track of all your activity and protects you from losing your work.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;......(省略)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;description&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;projectUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;https://www.jetbrains.com/datagrip/&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;projectUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;packageSourceUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;https://github.com/Xuanwo/datagrip-chocolatey-package&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;packageSourceUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;projectSourceUrl&amp;gt;&amp;lt;/projectSourceUrl&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;docsUrl&amp;gt;&amp;lt;/docsUrl&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;mailingListUrl&amp;gt;&amp;lt;/mailingListUrl&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;bugTrackerUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;https://youtrack.jetbrains.com/issues/DBE&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;bugTrackerUrl&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;tags&lt;/span&gt;&amp;gt;&lt;/span&gt;datagrip admin jetbrains trial 30days&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;tags&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;copyright&lt;/span&gt;&amp;gt;&lt;/span&gt;Commercial&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;copyright&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;licenseUrl&amp;gt;&amp;lt;/licenseUrl&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;requireLicenseAcceptance&lt;/span&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;requireLicenseAcceptance&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;iconUrl&amp;gt;http://cdn.rawgit.com/__REPLACE_YOUR_REPO__/master/icons/datagrip.png&amp;lt;/iconUrl&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;dependencies&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;dependency id=&quot;&quot; version=&quot;__VERSION__&quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;lt;dependency id=&quot;&quot; /&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;/dependencies&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;releaseNotes&lt;/span&gt;&amp;gt;&lt;/span&gt;https://confluence.jetbrains.com/display/DBE/DataGrip+1.0.1+Release+Notes&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;releaseNotes&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;&amp;lt;!--&amp;lt;provides&amp;gt;&amp;lt;/provides&amp;gt;--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;metadata&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;files&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;src&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;tools\**&quot;&lt;/span&gt; &lt;span class=&quot;attr&quot;&gt;target&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&quot;tools&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;files&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;package&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;有一个比较坑的地方是&lt;code&gt;&amp;lt;description&amp;gt;&lt;/code&gt;部分是支持Markdown的，内容直接顶着括号写就OK，不用另起一行，也不用自己加缩进。&lt;/p&gt;
&lt;h3 id=&quot;补充chocolateyinstall-ps1&quot;&gt;&lt;a href=&quot;#补充chocolateyinstall-ps1&quot; class=&quot;headerlink&quot; title=&quot;补充chocolateyinstall.ps1&quot;&gt;&lt;/a&gt;补充chocolateyinstall.ps1&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;chocolateyuninstall&lt;/code&gt;可以没有，但是一定要有&lt;code&gt;chocolateyinstall&lt;/code&gt;脚本。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;chocolateyinstall.ps1&lt;/code&gt;如果点击&lt;code&gt;编辑&lt;/code&gt;打开的话，会自动调用&lt;code&gt;Windows Powershell ISE&lt;/code&gt;编辑器。&lt;/p&gt;
&lt;p&gt;下面同样列举一份已经填写完成的样例：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$packageName&lt;/span&gt;= &lt;span class=&quot;string&quot;&gt;&#39;datagrip&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$installerType&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;EXE&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$toolsDir&lt;/span&gt;   = &lt;span class=&quot;string&quot;&gt;&quot;$(Split-Path -parent &lt;span class=&quot;variable&quot;&gt;$MyInvocation&lt;/span&gt;.MyCommand.Definition)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$url&lt;/span&gt;        = &lt;span class=&quot;string&quot;&gt;&#39;https://download.jetbrains.com/datagrip/datagrip-1.0.1.exe&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$silentArgs&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&#39;/S&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$validExitCodes&lt;/span&gt; = @(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Install-ChocolateyPackage &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$packageName&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$installerType&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$silentArgs&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;&lt;span class=&quot;variable&quot;&gt;$url&lt;/span&gt;&quot;&lt;/span&gt;  -validExitCodes &lt;span class=&quot;variable&quot;&gt;$validExitCodes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;需要注意的是，填写完毕之后，一定要在Powershell中运行下列代码以删除所有的注释文字：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$f&lt;/span&gt;=&lt;span class=&quot;string&quot;&gt;&#39;c:\path\to\thisFile.ps1&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gc &lt;span class=&quot;variable&quot;&gt;$f&lt;/span&gt; | ? &amp;#123;&lt;span class=&quot;variable&quot;&gt;$_&lt;/span&gt; &lt;span class=&quot;nomarkup&quot;&gt;-notmatch&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&quot;^\s*#&quot;&lt;/span&gt;&amp;#125; | % &amp;#123;&lt;span class=&quot;variable&quot;&gt;$_&lt;/span&gt; &lt;span class=&quot;nomarkup&quot;&gt;-replace&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;(^.*?)\s*?[^``]#.*&#39;&lt;/span&gt;,&lt;span class=&quot;string&quot;&gt;&#39;$1&#39;&lt;/span&gt;&amp;#125; | &lt;span class=&quot;built_in&quot;&gt;Out-File&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$f&lt;/span&gt;+&lt;span class=&quot;string&quot;&gt;&quot;.~&quot;&lt;/span&gt; -en utf8; mv -fo &lt;span class=&quot;variable&quot;&gt;$f&lt;/span&gt;+&lt;span class=&quot;string&quot;&gt;&quot;.~&quot;&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$f&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;打包上传&quot;&gt;&lt;a href=&quot;#打包上传&quot; class=&quot;headerlink&quot; title=&quot;打包上传&quot;&gt;&lt;/a&gt;打包上传&lt;/h3&gt;&lt;p&gt;所有的信息填写完成后，在&lt;code&gt;test.nuspec&lt;/code&gt;所在目录下执行&lt;code&gt;choco pack&lt;/code&gt;就会自动进行打包。&lt;br&gt;如果有重要的信息没有填写，choco将会报错，并红字提示：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LicenseUrl cannot be empty.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ProjectUrl cannot be empty.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PackageSourceUrl cannot be empty.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果没有问题，则会有如下提示：&lt;/p&gt;
&lt;figure class=&quot;highlight powershell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Attempting to build package from &lt;span class=&quot;string&quot;&gt;&#39;datagrip.nuspec&#39;&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Successfully created package &lt;span class=&quot;string&quot;&gt;&#39;datagrip.1.0.1.nupkg&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;之后执行 &lt;code&gt;choco push datagrip.1.0.1.nupkg&lt;/code&gt;即可将包上传至Chocolatey，通过管理员的审核之后，就会出现在软件列表中供人们下载了。&lt;/p&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://chocolatey.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Chocolatey 官方网站&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://isaachan.github.io/blog/2013/02/07/chocolatey-i-love-you/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Chocolatey, 我爱你&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年02月15日 初步完成&lt;/li&gt;
&lt;li&gt;2016年02月20日 修复脚本中的部分错误&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://chocolatey.org/&quot;&gt;Chocolatey&lt;/a&gt;是一个基于Nuget的Windows包管理工具，截止到我更新此文章的时候，一共有3.7k多个独立包。本文旨在介绍Chocolatey这一工具的安装和用法，希望能有更多人享受到该工具的便利之处。&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="Windows" scheme="https://xuanwo.org/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>解放你的智能电视</title>
    <link href="https://xuanwo.org/2016/02/04/unlock-your-smart-tv/"/>
    <id>https://xuanwo.org/2016/02/04/unlock-your-smart-tv/</id>
    <published>2016-02-04T23:12:52.000Z</published>
    <updated>2016-04-18T06:43:21.546Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;现在很多人都买了智能电视，但是出于种种你懂得原因，厂商通常都不允许用户自行安装自己想要的APP，比如腾讯视频，优酷视频之类的。本教程旨在突破这些限制，彻底解放智能电视的全部潜力。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;前提&quot;&gt;&lt;a href=&quot;#前提&quot; class=&quot;headerlink&quot; title=&quot;前提&quot;&gt;&lt;/a&gt;前提&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;一台智能电视（基于安卓平台）&lt;/li&gt;
&lt;li&gt;一台电脑&lt;/li&gt;
&lt;li&gt;互联网连接&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;操作&quot;&gt;&lt;a href=&quot;#操作&quot; class=&quot;headerlink&quot; title=&quot;操作&quot;&gt;&lt;/a&gt;操作&lt;/h1&gt;&lt;h2 id=&quot;自己动手丰衣足食&quot;&gt;&lt;a href=&quot;#自己动手丰衣足食&quot; class=&quot;headerlink&quot; title=&quot;自己动手丰衣足食&quot;&gt;&lt;/a&gt;自己动手丰衣足食&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;强力推荐，避免第三方软件安装莫名其妙的东西，没有后台驻留&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;前期准备&quot;&gt;&lt;a href=&quot;#前期准备&quot; class=&quot;headerlink&quot; title=&quot;前期准备&quot;&gt;&lt;/a&gt;前期准备&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;将电视和电脑接入同一个路由器&lt;/li&gt;
&lt;li&gt;下载&lt;a href=&quot;http://pan.baidu.com/s/1eRbMCca&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;智能电视解放工具&lt;/code&gt;&lt;/a&gt;并解压&lt;/li&gt;
&lt;li&gt;获取电视的IP地址&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;电视的IP地址一般可以通过点击&lt;code&gt;设置&lt;/code&gt;-&lt;code&gt;网络设置&lt;/code&gt;来获得，是一个形如&lt;code&gt;192.168.1.105&lt;/code&gt;的数字串&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;连接电视&quot;&gt;&lt;a href=&quot;#连接电视&quot; class=&quot;headerlink&quot; title=&quot;连接电视&quot;&gt;&lt;/a&gt;连接电视&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;打开&lt;code&gt;TCPUDP调试工具&lt;/code&gt;文件夹中的&lt;code&gt;点我执行.exe&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/unlock-smart-tv-self-1.png&quot; alt=&quot;TCP调试工具&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;点击&lt;code&gt;创建连接&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/unlock-smart-tv-self-2.png&quot; alt=&quot;TCP调试工具&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;类型选择&lt;code&gt;TCP&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;目标IP填写刚才获取到的电视IP地址&lt;/li&gt;
&lt;li&gt;端口填写&lt;code&gt;8090&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;其他的不用修改&lt;/li&gt;
&lt;li&gt;确认填写正确后，点击&lt;code&gt;创建&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;点击&lt;code&gt;连接&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果没有出现问题，软件的界面将会变成下图式样：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/unlock-smart-tv-self-3.png&quot; alt=&quot;TCP调试工具&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;清除上面的发送框中所有文字并输入&lt;code&gt;start adbd&lt;/code&gt;，然后点击发送&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/unlock-smart-tv-self-4.png&quot; alt=&quot;TCP调试工具&quot;&gt;&lt;/p&gt;
&lt;p&gt;如果如图，在下面的接受框中出现了&lt;code&gt;ok&lt;/code&gt;，说明已经连接成功了~&lt;/p&gt;
&lt;h3 id=&quot;安装应用&quot;&gt;&lt;a href=&quot;#安装应用&quot; class=&quot;headerlink&quot; title=&quot;安装应用&quot;&gt;&lt;/a&gt;安装应用&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;将所有需要安装的APK文件都放到&lt;code&gt;一键安装软件&lt;/code&gt;文件夹中&lt;/li&gt;
&lt;li&gt;点击&lt;code&gt;双击运行一键安装.bat&lt;/code&gt;，按照提示输入IP地址并回车，如图：&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/imgs/opinion/unlock-smart-tv-self-5.png&quot; alt=&quot;TCP调试工具&quot;&gt;&lt;/p&gt;
&lt;p&gt;等到提示安装成功后，你就已经成功地在电视上安装上了想要的APP了~&lt;/p&gt;
&lt;h2 id=&quot;一键工具&quot;&gt;&lt;a href=&quot;#一键工具&quot; class=&quot;headerlink&quot; title=&quot;一键工具&quot;&gt;&lt;/a&gt;一键工具&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;方便快捷，但是会在电视上安装辅助工具&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个工具名为&lt;code&gt;TV盒子助手&lt;/code&gt;，官方网址为： &lt;a href=&quot;http://www.cnhezi.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.cnhezi.com/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本质上，这个工具就是将前面的教程打包起来制作而成的，但是它会在电视上安装一个辅助工具，比较奇怪。&lt;/p&gt;
&lt;h1 id=&quot;推荐应用&quot;&gt;&lt;a href=&quot;#推荐应用&quot; class=&quot;headerlink&quot; title=&quot;推荐应用&quot;&gt;&lt;/a&gt;推荐应用&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://tv.qq.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;腾讯视频TV版&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://pd.youku.com/CIBN&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CIBN合一影视&lt;em&gt;内容提供方：优酷&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://app.iqiyi.com/tv/player/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;银河·奇异果&lt;em&gt;内容提供方：爱奇艺&lt;/em&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;附言&quot;&gt;&lt;a href=&quot;#附言&quot; class=&quot;headerlink&quot; title=&quot;附言&quot;&gt;&lt;/a&gt;附言&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;理论上来说，所有的安卓应用都可以进行安装。但是由于电视操控上的特殊性，没有对电视进行适配的应用非常难以使用，故不推荐进行安装。&lt;/li&gt;
&lt;li&gt;大部分智能电视的内存都比较小，故不能同时运行太多软件，所以建议打开应用前先退出别的应用否则容易出现卡顿现象。&lt;/li&gt;
&lt;li&gt;原本能用的APP现在不能用了是因为&lt;a href=&quot;http://news.xinhuanet.com/politics/2015-11/16/c_128434204.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;广电总局全面封杀了电视盒子&lt;/a&gt;，一大批应用都被下架了，而且要求禁止提供APP安装功能。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年02月04日 初次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;现在很多人都买了智能电视，但是出于种种你懂得原因，厂商通常都不允许用户自行安装自己想要的APP，比如腾讯视频，优酷视频之类的。本教程旨在突破这些限制，彻底解放智能电视的全部潜力。&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>如何识别真假链接？</title>
    <link href="https://xuanwo.org/2016/01/13/how-to-differ-invalid-link/"/>
    <id>https://xuanwo.org/2016/01/13/how-to-differ-invalid-link/</id>
    <published>2016-01-13T01:18:51.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;前两天我的朋友圈被微信公开课活动的链接+截图刷屏，随后一大帮“业内人士”站出来说这个是盗号连接，只要点开，微信钱包和支付宝就会被盗。作为半个业内人士，我不能忍了，决定跟大家谈一谈如何识别真假链接。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;域名是什么？&quot;&gt;&lt;a href=&quot;#域名是什么？&quot; class=&quot;headerlink&quot; title=&quot;域名是什么？&quot;&gt;&lt;/a&gt;域名是什么？&lt;/h1&gt;&lt;p&gt;首先我们来介绍一下域名：域名就是计算机在网络上的名字，免去人们需要记忆IP地址的困扰。&lt;br&gt;域名由若干个英文字母和数字组成，由&lt;code&gt;.&lt;/code&gt;分割成几份，形成一个网络上唯一的访问地址。&lt;/p&gt;
&lt;p&gt;以&lt;code&gt;https://support.weixin.qq.com&lt;/code&gt;为例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;support.weixin.qq.com&lt;/code&gt;为三级域名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;weixin.qq.com&lt;/code&gt;为二级域名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qq.com&lt;/code&gt;为一级域名&lt;/li&gt;
&lt;li&gt;&lt;code&gt;.com&lt;/code&gt;是顶级域名后缀&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;链接是什么？&quot;&gt;&lt;a href=&quot;#链接是什么？&quot; class=&quot;headerlink&quot; title=&quot;链接是什么？&quot;&gt;&lt;/a&gt;链接是什么？&lt;/h1&gt;&lt;p&gt;然后我们来介绍一下&lt;code&gt;链接&lt;/code&gt;，也就是URL，全称为&lt;code&gt;统一资源定位符&lt;/code&gt;，我们也称它们为&lt;code&gt;网址&lt;/code&gt;。链接的标准格式一般如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;协议类型://服务器地址（必要时需加上端口号）/路径/文件名&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;协议类型：常用的有http，https，ftp等&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;https意味着什么？&lt;br&gt;https又叫做&lt;code&gt;超文本传输安全协议&lt;/code&gt;，使用这个协议意味着你与这个网页的所有交互都是加密的，任何第三方都无法窥探你传输的信息（相对而言的，世上没有绝对的安全），经常被用于万维网上的交易支付和企业信息系统中敏感信息的传输。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;服务器地址：一般都是域名，有时为IP地址&lt;/li&gt;
&lt;li&gt;端口号：http预设的80端口以及https的443端口可以省略&lt;/li&gt;
&lt;li&gt;路径：以“/”字元区别路径中的每一个目录名称&lt;/li&gt;
&lt;li&gt;查询：GET模式的表单参数，以“?”字元为起点，每个参数以“&amp;amp;”隔开，再以“=”分开参数名称与资料，通常以UTF8的URL编码，避开字元冲突的问题&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;如何分析一个链接？&quot;&gt;&lt;a href=&quot;#如何分析一个链接？&quot; class=&quot;headerlink&quot; title=&quot;如何分析一个链接？&quot;&gt;&lt;/a&gt;如何分析一个链接？&lt;/h1&gt;&lt;p&gt;比如说我们这次微信公开课活动的链接：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;https://support.weixin.qq.com/cgi-bin/xxxxxxxx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;对于用户而言，有用的信息如下：协议采用https协议，域名为&lt;code&gt;support.weixin.qq.com&lt;/code&gt;。&lt;br&gt;采用https协议意味着你的信息是受到保护的，即使你使用了公共的wifi，同一wifi下的可能存在着的黑客也无法窥探你的私人信息。域名&lt;code&gt;support.weixin.qq.com&lt;/code&gt;传递了如下信息，这个网页是归属于&lt;code&gt;qq.com&lt;/code&gt;的，这从源头上保证了这一网页的安全性（如果腾讯没有内鬼的话）。&lt;/p&gt;
&lt;p&gt;下面我们来看看一个假的链接是怎么样的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;亲爱的淘宝用户您好，恭喜您在本次活动中获得特等奖iPhone6s一部，请登陆 &lt;a href=&quot;http://www.taoba0.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.taoba0.com&lt;/a&gt; 领取您的奖品。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这是一条诈骗短信，我们可以看到骗子给出了这样一个链接&lt;code&gt;http://www.taoba0.com&lt;/code&gt;，一定要看清楚是&lt;code&gt;taoba0&lt;/code&gt;而不是&lt;code&gt;taobao&lt;/code&gt;，然后你就应该明白，这是一条诈骗短信了。值得提醒的是，现在前端技术高度发达，克隆复制一个网页非常容易，所以在网站之间挑战时，一定要确认自己点击的链接是正确的链接，否则极有可能被相似的页面欺骗。&lt;/p&gt;
&lt;h1 id=&quot;如何保证安全？&quot;&gt;&lt;a href=&quot;#如何保证安全？&quot; class=&quot;headerlink&quot; title=&quot;如何保证安全？&quot;&gt;&lt;/a&gt;如何保证安全？&lt;/h1&gt;&lt;p&gt;从上一个链接的分析中，我们可以得出以下几个小技巧：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;尽可能地使用https协议进行访问&lt;/li&gt;
&lt;li&gt;认清域名，不轻信非官方域名的页面&lt;/li&gt;
&lt;li&gt;网站之间跳转时，确认自己点击的链接是否正确&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;最后的寄语&quot;&gt;&lt;a href=&quot;#最后的寄语&quot; class=&quot;headerlink&quot; title=&quot;最后的寄语&quot;&gt;&lt;/a&gt;最后的寄语&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;请开启两部验证。国外的账户大多支持Google的两部验证，请启用这一功能。国内的账户的话，QQ请打开设备锁，QQ邮箱请打开独立密码。&lt;/li&gt;
&lt;li&gt;不要贪小便宜！不要贪小便宜！！不要贪小便宜！！！重要的事情说三遍。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;域名-维基百科&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;统一资源定位符-维基百科&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年1月13日 首次发布&lt;/li&gt;
&lt;li&gt;2016年1月14日 更新了域名相关知识&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;前两天我的朋友圈被微信公开课活动的链接+截图刷屏，随后一大帮“业内人士”站出来说这个是盗号连接，只要点开，微信钱包和支付宝就会被盗。作为半个业内人士，我不能忍了，决定跟大家谈一谈如何识别真假链接。&lt;/p&gt;
    
    </summary>
    
      <category term="Daily" scheme="https://xuanwo.org/categories/Daily/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="科普" scheme="https://xuanwo.org/tags/%E7%A7%91%E6%99%AE/"/>
    
  </entry>
  
  <entry>
    <title>VS2015连接Oracle数据库</title>
    <link href="https://xuanwo.org/2016/01/03/vs-oracle-11g/"/>
    <id>https://xuanwo.org/2016/01/03/vs-oracle-11g/</id>
    <published>2016-01-03T15:31:32.000Z</published>
    <updated>2016-04-18T06:43:21.546Z</updated>
    
    <content type="html">&lt;h1 id=&quot;开发环境&quot;&gt;&lt;a href=&quot;#开发环境&quot; class=&quot;headerlink&quot; title=&quot;开发环境&quot;&gt;&lt;/a&gt;开发环境&lt;/h1&gt;&lt;p&gt;宿主机：Win10 + VS2015 + ODP.Net for VS2015&lt;br&gt;虚拟机：Win7 + Oracle 11g + 桥接&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;配置ODP-Net&quot;&gt;&lt;a href=&quot;#配置ODP-Net&quot; class=&quot;headerlink&quot; title=&quot;配置ODP.Net&quot;&gt;&lt;/a&gt;配置ODP.Net&lt;/h1&gt;&lt;p&gt;首先下载 &lt;a href=&quot;http://www.oracle.com/technetwork/topics/dotnet/downloads/odacmsidownload-2745497.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Oracle Developer Tools for Visual Studio 2015&lt;/a&gt; ，下载此文件需要注册Oracle社区账号并接受相关的协议，此文件提供了以下组件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Oracle Developer Tools for Visual Studio 12.1.0.2.4&lt;/li&gt;
&lt;li&gt;Oracle Data Provider for .NET 4 12.1.0.2.0&lt;/li&gt;
&lt;li&gt;Oracle Providers for ASP.NET 4 12.1.0.2.0&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下载完成后运行MSI安装程序进行安装，安装完成后会自动注册VS2015的相关插件，重新启动VS2015后将会看到Oracle的相关命令，比如SQL *PLUS支持等。同时添加数据库时也能看到相应的选项。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ODP.Net支持所有Oracle版本，因此下载时只需要注意VS的版本即可。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;配置tnsnames-ora&quot;&gt;&lt;a href=&quot;#配置tnsnames-ora&quot; class=&quot;headerlink&quot; title=&quot;配置tnsnames.ora&quot;&gt;&lt;/a&gt;配置tnsnames.ora&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;ODP.Net默认使用安装目录下的&lt;code&gt;tnsnames.ora&lt;/code&gt;，若安装目录在Program Files下，可能会遇到无权限等问题，此时使用管理员权限打开命令行，切换到对应目录并使用notepad编辑。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;复制服务器端的tnsnames.ora文件内容，或者自己手动编辑，格式如下：&lt;/p&gt;
&lt;figure class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;数据源别名&amp;gt; =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  (DESCRIPTION =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (ADDRESS = (PROTOCOL = TCP)(HOST = &amp;lt;主机名或IP&amp;gt;)(PORT = &amp;lt;端口号&amp;gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (CONNECT_DATA =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      (SERVER = DEDICATED)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      (SERVICE_NAME = &amp;lt;数据库服务名&amp;gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;添加数据库&quot;&gt;&lt;a href=&quot;#添加数据库&quot; class=&quot;headerlink&quot; title=&quot;添加数据库&quot;&gt;&lt;/a&gt;添加数据库&lt;/h1&gt;&lt;p&gt;打开&lt;code&gt;工具&lt;/code&gt;-&lt;code&gt;连接到数据库&lt;/code&gt;，数据源修改为&lt;code&gt;Oracle数据库&lt;/code&gt;下的&lt;code&gt;ODP.NET,托管驱动程序&lt;/code&gt;，然后点击&lt;code&gt;确定&lt;/code&gt;，打开&lt;code&gt;添加连接&lt;/code&gt;窗口。&lt;br&gt;&lt;img src=&quot;/imgs/develop/add-database.png&quot; alt=&quot;添加连接&quot;&gt;&lt;br&gt;填写用户名，密码并选择数据源，然后测试连接，成功的话说明已经连通，点击确定即可。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;使用虚拟机搭建数据库的额外Tips&lt;br&gt;根据某网友分析，Oracle的监听器在通过1521端口连接后，会开启另外一个新的随机端口进行数据通讯，因此使用NAT方式虚拟网卡可能会导致连接失败。这种情况下，请使用桥接方式虚拟网卡，并在&lt;code&gt;net manager&lt;/code&gt;中将&lt;code&gt;loaclhost&lt;/code&gt;修改为虚拟机当前的IP。重启监听服务后，再试。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;连接数据库并使用&quot;&gt;&lt;a href=&quot;#连接数据库并使用&quot; class=&quot;headerlink&quot; title=&quot;连接数据库并使用&quot;&gt;&lt;/a&gt;连接数据库并使用&lt;/h1&gt;&lt;h2 id=&quot;连接数据库&quot;&gt;&lt;a href=&quot;#连接数据库&quot; class=&quot;headerlink&quot; title=&quot;连接数据库&quot;&gt;&lt;/a&gt;连接数据库&lt;/h2&gt;&lt;figure class=&quot;highlight vb&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; oradb &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;User ID=system;Password=123456;Data Source=lol&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; conn &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;New&lt;/span&gt; OracleConnection(oradb)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;conn.Open()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; sql &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;create table xxx&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; sqlCom &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;New&lt;/span&gt; OracleCommand&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.CommandText = sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.Connection = conn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.ExecuteNonQuery()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;查询数据&quot;&gt;&lt;a href=&quot;#查询数据&quot; class=&quot;headerlink&quot; title=&quot;查询数据&quot;&gt;&lt;/a&gt;查询数据&lt;/h2&gt;&lt;p&gt;成功配置数据源之后，只需要向界面上拖动&lt;code&gt;DataGridView&lt;/code&gt;，并进行相关配置，选择自己需要的表即可。&lt;/p&gt;
&lt;h2 id=&quot;插入图片的正确姿势&quot;&gt;&lt;a href=&quot;#插入图片的正确姿势&quot; class=&quot;headerlink&quot; title=&quot;插入图片的正确姿势&quot;&gt;&lt;/a&gt;插入图片的正确姿势&lt;/h2&gt;&lt;p&gt;图片作为二进制数据无法直接拼凑出SQL命令，我们需要使用&lt;code&gt;OracleCommand&lt;/code&gt;自带的&lt;code&gt;Parameters&lt;/code&gt;功能。在SQL命令中用&lt;code&gt;:photo&lt;/code&gt;来代表一个参量，然后使用&lt;/p&gt;
&lt;figure class=&quot;highlight vb&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.Parameters.Add(&lt;span class=&quot;string&quot;&gt;&quot;photo&quot;&lt;/span&gt;, OracleDbType.Blob, imgData.Length)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来分别指定这个参量的类型和所占空间大小&lt;/p&gt;
&lt;p&gt;最后使用&lt;/p&gt;
&lt;figure class=&quot;highlight vb&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.Parameters(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;).Value = imgData&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;来指定这个参量的值。&lt;/p&gt;
&lt;p&gt;整个插入图片过程的代码如下：&lt;/p&gt;
&lt;figure class=&quot;highlight vb&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; conn &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;New&lt;/span&gt; OracleConnection(oradb)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; imgData(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Byte&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; ms &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;New&lt;/span&gt; System.IO.MemoryStream&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;PictureBox1.BackgroundImage.Save(ms, PictureBox1.BackgroundImage.RawFormat)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;ReDim&lt;/span&gt; imgData(ms.Length - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ms.Read(imgData, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, ms.Length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ms.Close()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;conn.Open()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; sql &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; = &lt;span class=&quot;string&quot;&gt;&quot;insert into hero values&quot;&lt;/span&gt; &amp;amp; &lt;span class=&quot;string&quot;&gt;&quot;(&quot;&lt;/span&gt; &amp;amp; TextBox1.&lt;span class=&quot;keyword&quot;&gt;Text&lt;/span&gt; &amp;amp; &lt;span class=&quot;string&quot;&gt;&quot;:photo&quot;&lt;/span&gt; &amp;amp; &lt;span class=&quot;string&quot;&gt;&quot;)&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Dim&lt;/span&gt; sqlCom &lt;span class=&quot;keyword&quot;&gt;As&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;New&lt;/span&gt; OracleCommand&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.CommandText = sql&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.Connection = conn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.Parameters.Add(&lt;span class=&quot;string&quot;&gt;&quot;photo&quot;&lt;/span&gt;, OracleDbType.Blob, imgData.Length)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.Parameters(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;).Value = imgData&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlCom.ExecuteNonQuery()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;常见错误&quot;&gt;&lt;a href=&quot;#常见错误&quot; class=&quot;headerlink&quot; title=&quot;常见错误&quot;&gt;&lt;/a&gt;常见错误&lt;/h1&gt;&lt;h2 id=&quot;column-not-allowed-here&quot;&gt;&lt;a href=&quot;#column-not-allowed-here&quot; class=&quot;headerlink&quot; title=&quot;column not allowed here&quot;&gt;&lt;/a&gt;column not allowed here&lt;/h2&gt;&lt;p&gt;数据类型不符，检查对应项目数据类型是否正确。&lt;/p&gt;
&lt;h2 id=&quot;missing-comma&quot;&gt;&lt;a href=&quot;#missing-comma&quot; class=&quot;headerlink&quot; title=&quot;missing comma&quot;&gt;&lt;/a&gt;missing comma&lt;/h2&gt;&lt;p&gt;命令格式不对，检查一下自己的SQL命令是否有错误，特别是在有字符串的时候，需要使用&lt;code&gt;&amp;quot;&amp;quot;&lt;/code&gt;来代表一个字符串中的&lt;code&gt;&amp;quot;&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&quot;identifier-is-too-long&quot;&gt;&lt;a href=&quot;#identifier-is-too-long&quot; class=&quot;headerlink&quot; title=&quot;identifier is too long&quot;&gt;&lt;/a&gt;identifier is too long&lt;/h2&gt;&lt;p&gt;标识符过长（不得超过30字符），不是非常明白原因，不过我取消掉insert命令中指定位置的部分之后，这个错误消失了。&lt;/p&gt;
&lt;h2 id=&quot;missing-INTO-keyword&quot;&gt;&lt;a href=&quot;#missing-INTO-keyword&quot; class=&quot;headerlink&quot; title=&quot;missing INTO keyword&quot;&gt;&lt;/a&gt;missing INTO keyword&lt;/h2&gt;&lt;p&gt;缺少into关键字（手滑打成了inte），检查一下自己的SQL命令是否有错误。&lt;/p&gt;
&lt;h2 id=&quot;cannot-insert-NULL-into-“SYSTEM”-”HERO”-”HEROCATEGORYID”&quot;&gt;&lt;a href=&quot;#cannot-insert-NULL-into-“SYSTEM”-”HERO”-”HEROCATEGORYID”&quot; class=&quot;headerlink&quot; title=&quot;cannot insert NULL into (“SYSTEM”.”HERO”.”HEROCATEGORYID”)&quot;&gt;&lt;/a&gt;cannot insert NULL into (“SYSTEM”.”HERO”.”HEROCATEGORYID”)&lt;/h2&gt;&lt;p&gt;这些项都指定了非0值，故不能不赋值，为对应项目赋值即可。&lt;/p&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2016年01月03日 初步完成&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;开发环境&quot;&gt;&lt;a href=&quot;#开发环境&quot; class=&quot;headerlink&quot; title=&quot;开发环境&quot;&gt;&lt;/a&gt;开发环境&lt;/h1&gt;&lt;p&gt;宿主机：Win10 + VS2015 + ODP.Net for VS2015&lt;br&gt;虚拟机：Win7 + Oracle 11g + 桥接&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
      <category term="Database" scheme="https://xuanwo.org/tags/Database/"/>
    
      <category term="Oracle" scheme="https://xuanwo.org/tags/Oracle/"/>
    
      <category term="VB" scheme="https://xuanwo.org/tags/VB/"/>
    
  </entry>
  
  <entry>
    <title>最佳跨平台PDF阅读解决方案</title>
    <link href="https://xuanwo.org/2015/12/23/best-pdf-read-solution/"/>
    <id>https://xuanwo.org/2015/12/23/best-pdf-read-solution/</id>
    <published>2015-12-23T16:15:20.000Z</published>
    <updated>2016-04-18T06:43:21.538Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;最近因为学习需要，要大量阅读纯文字的PDF文档。然后我惊讶地发现市场上居然没有哪家提供一套完整可用的跨平台PDF阅读解决方案，于是我在尝试了市面几乎所有叫得上名字的各类阅读器之后，形成了一套自己的跨平台PDF阅读解决方案。本文记录了这套方案的详细内容，希望会有所益处。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;目标&quot;&gt;&lt;a href=&quot;#目标&quot; class=&quot;headerlink&quot; title=&quot;目标&quot;&gt;&lt;/a&gt;目标&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;跨平台（目前支持Windows和Android）&lt;/li&gt;
&lt;li&gt;阅读记录同步&lt;/li&gt;
&lt;li&gt;支持标准PDF的批注和高亮等功能&lt;/li&gt;
&lt;li&gt;对PDF文件管理方便&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;思路&quot;&gt;&lt;a href=&quot;#思路&quot; class=&quot;headerlink&quot; title=&quot;思路&quot;&gt;&lt;/a&gt;思路&lt;/h1&gt;&lt;p&gt;标准PDF的批注和高亮功能是内嵌在PDF文件中的，只要同步了PDF文件，也就同步了所有在PDF文件上的批注和高亮。因此这个问题很大程度上就变成了解决跨平台文件双向同步问题。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;跨平台双向同步在很多人看来是一个已经被Dropbox以及Google Drive解决了问题，但是实际上，它们在PC和移动端的行为是不一样的。PC端是完整的双向同步，而在移动端，为了节省流量和空间，它们都是提供了一个File list，你必须要自己下载指定文件。不仅如此，这个下载下来的文件大多是Read-Only的，用阅读器批注之后，你会发现这个文件无法保存，这样的话，PDF跨平台批注就无从谈起。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;解决方案&quot;&gt;&lt;a href=&quot;#解决方案&quot; class=&quot;headerlink&quot; title=&quot;解决方案&quot;&gt;&lt;/a&gt;解决方案&lt;/h1&gt;&lt;p&gt;按照上面思路中的讨论，我在每一个平台上的解决方案都分成两个部分，第一是解决PDF阅读、批注问题，第二是解决PDF文件双向同步问题。&lt;/p&gt;
&lt;h2 id=&quot;Windows&quot;&gt;&lt;a href=&quot;#Windows&quot; class=&quot;headerlink&quot; title=&quot;Windows&quot;&gt;&lt;/a&gt;Windows&lt;/h2&gt;&lt;h3 id=&quot;Goodsync&quot;&gt;&lt;a href=&quot;#Goodsync&quot; class=&quot;headerlink&quot; title=&quot;Goodsync&quot;&gt;&lt;/a&gt;Goodsync&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/imgs/opinion/goodsync.png&quot; alt=&quot;Goodsync&quot;&gt;&lt;br&gt;&lt;a href=&quot;http://www.goodsync.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Goodsync&lt;/strong&gt;&lt;/a&gt;是一款非常强大的同步工具，我们通过它来提供本地到Google Drive的双向同步功能。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果通过SS艹墙，配置Google Drive时请勾选&lt;code&gt;基于WinInet&lt;/code&gt;，如图：&lt;img src=&quot;/imgs/opinion/goodsync-proxy-setting.png&quot; alt=&quot;Goodsync Proxy Setting&quot;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Foxit-Reader&quot;&gt;&lt;a href=&quot;#Foxit-Reader&quot; class=&quot;headerlink&quot; title=&quot;Foxit Reader&quot;&gt;&lt;/a&gt;Foxit Reader&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/imgs/opinion/foxit-reader.png&quot; alt=&quot;Foxit Reader&quot;&gt;&lt;br&gt;&lt;a href=&quot;http://www.foxitsoftware.cn/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Foxit Reader&lt;/strong&gt;&lt;/a&gt;，也就是福昕阅读器，不多说了，新版的界面还是可以的。（尽管我觉得颜值没有Adobe Reader DC高）&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;为什么不选Adobe？Adobe最新版本的批注功能在特定的PDF上好像有点问题，我尝试了几个都不能正常保存，总是提示错误110，无奈放弃。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Android&quot;&gt;&lt;a href=&quot;#Android&quot; class=&quot;headerlink&quot; title=&quot;Android&quot;&gt;&lt;/a&gt;Android&lt;/h2&gt;&lt;h3 id=&quot;Flodersync&quot;&gt;&lt;a href=&quot;#Flodersync&quot; class=&quot;headerlink&quot; title=&quot;Flodersync&quot;&gt;&lt;/a&gt;Flodersync&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/imgs/opinion/Flodersync.png&quot; alt=&quot;Flodersync&quot;&gt;&lt;br&gt;&lt;a href=&quot;https://play.google.com/store/apps/details?id=dk.tacit.android.foldersync.lite&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Flodersync&lt;/strong&gt;&lt;/a&gt;是一款基于安卓平台的非常棒的一款应用，我们通过它来实现安卓平台的双向同步。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;开启双向同步请取消勾选&lt;code&gt;不同步删除&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;Moon&quot;&gt;&lt;a href=&quot;#Moon&quot; class=&quot;headerlink&quot; title=&quot;Moon+&quot;&gt;&lt;/a&gt;Moon+&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/imgs/opinion/Moon.png&quot; alt=&quot;Moon+&quot;&gt;&lt;br&gt;&lt;a href=&quot;https://play.google.com/store/apps/details?id=com.flyersoft.moonreader&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;strong&gt;Moon+&lt;/strong&gt;&lt;/a&gt;，静读天下，安卓平台上首屈一指的阅读器，支持格式众多，速度流畅，除了免费版有些功能阉割和广告之外，没有别的问题。&lt;/p&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年12月23日 初始发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;最近因为学习需要，要大量阅读纯文字的PDF文档。然后我惊讶地发现市场上居然没有哪家提供一套完整可用的跨平台PDF阅读解决方案，于是我在尝试了市面几乎所有叫得上名字的各类阅读器之后，形成了一套自己的跨平台PDF阅读解决方案。本文记录了这套方案的详细内容，希望会有所益处。&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="Read" scheme="https://xuanwo.org/tags/Read/"/>
    
      <category term="Windows" scheme="https://xuanwo.org/tags/Windows/"/>
    
      <category term="Android" scheme="https://xuanwo.org/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>在线视频下载完整解决方案</title>
    <link href="https://xuanwo.org/2015/12/18/online-video-download-solution/"/>
    <id>https://xuanwo.org/2015/12/18/online-video-download-solution/</id>
    <published>2015-12-18T12:49:49.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;因为学习需要，产生了一个这样的需求：要从Youtube上批量下载视频。自然，出于方便使用的角度来看，音画不能分离，最好带有对应的字幕。一番搜罗之后，我找到了基于Python的开源产品： &lt;a href=&quot;https://rg3.github.io/youtube-dl/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;youtube-dl&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;值得一提的是，youtube-dl不仅仅能下载youtube上的视频，它支持的视频链接种类多达700+种，几乎囊括了所有在线视频网站，列表参见&lt;a href=&quot;https://rg3.github.io/youtube-dl/supportedsites.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;。让我不由得感慨开源的力量。除此以外，某些不存在的网址需要自备梯子，不再赘述。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;获取&quot;&gt;&lt;a href=&quot;#获取&quot; class=&quot;headerlink&quot; title=&quot;获取&quot;&gt;&lt;/a&gt;获取&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;checked on 2015-12-18&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Windows&quot;&gt;&lt;a href=&quot;#Windows&quot; class=&quot;headerlink&quot; title=&quot;Windows&quot;&gt;&lt;/a&gt;Windows&lt;/h2&gt;&lt;p&gt;Windows用户可以使用已经打包好的可执行程序：&lt;a href=&quot;https://yt-dl.org/downloads/2015.12.13/youtube-dl.exe&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;下载链接&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;UNIX-like&quot;&gt;&lt;a href=&quot;#UNIX-like&quot; class=&quot;headerlink&quot; title=&quot;UNIX like&quot;&gt;&lt;/a&gt;UNIX like&lt;/h2&gt;&lt;p&gt;类UNIX系统的用户可以使用curl或者wget来获取可执行文件&lt;/p&gt;
&lt;h3 id=&quot;curl&quot;&gt;&lt;a href=&quot;#curl&quot; class=&quot;headerlink&quot; title=&quot;curl&quot;&gt;&lt;/a&gt;curl&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo curl https://yt-dl.org/downloads/2015.12.13/youtube-dl -o /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/bin/youtube-dl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chmod a+rx /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/bin/youtube-dl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;wget&quot;&gt;&lt;a href=&quot;#wget&quot; class=&quot;headerlink&quot; title=&quot;wget&quot;&gt;&lt;/a&gt;wget&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo wget https://yt-dl.org/downloads/2015.12.13/youtube-dl -O /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/bin/youtube-dl&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chmod a+rx /usr/&lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt;/bin/youtube-dl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Homebrew&quot;&gt;&lt;a href=&quot;#Homebrew&quot; class=&quot;headerlink&quot; title=&quot;Homebrew&quot;&gt;&lt;/a&gt;Homebrew&lt;/h2&gt;&lt;p&gt;Homebrew用户可以使用如下命令进行安装：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;brew install youtube-dl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;pip&quot;&gt;&lt;a href=&quot;#pip&quot; class=&quot;headerlink&quot; title=&quot;pip&quot;&gt;&lt;/a&gt;pip&lt;/h2&gt;&lt;p&gt;同样的，你也可以使用pip来安装它。&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo pip install --upgrade youtube_dl&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Source&quot;&gt;&lt;a href=&quot;#Source&quot; class=&quot;headerlink&quot; title=&quot;Source&quot;&gt;&lt;/a&gt;Source&lt;/h2&gt;&lt;p&gt;自然，你可以选择下载源代码以及docs，链接&lt;a href=&quot;https://yt-dl.org/downloads/2015.12.13/youtube-dl-2015.12.13.tar.gz&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;见此&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h1&gt;&lt;h2 id=&quot;简易&quot;&gt;&lt;a href=&quot;#简易&quot; class=&quot;headerlink&quot; title=&quot;简易&quot;&gt;&lt;/a&gt;简易&lt;/h2&gt;&lt;p&gt;最简单的方式就是直接加上视频链接地址就可以自动下载到当前文件夹：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;youtube-dl.exe url&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;使用代理&quot;&gt;&lt;a href=&quot;#使用代理&quot; class=&quot;headerlink&quot; title=&quot;使用代理&quot;&gt;&lt;/a&gt;使用代理&lt;/h2&gt;&lt;p&gt;以常见的ss代理为例：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;youtube-dl.exe url --proxy http://127.0.0.1:1080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有一个坑点在于这个参数只支持HTTP/HTTPS代理，所以本地跑SS的话，需要在前面加上一个HTTP的前缀，否则代理不会正常工作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;下载列表&quot;&gt;&lt;a href=&quot;#下载列表&quot; class=&quot;headerlink&quot; title=&quot;下载列表&quot;&gt;&lt;/a&gt;下载列表&lt;/h2&gt;&lt;p&gt;以Youtube Playlist为例：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;youtube-dl.exe --yes-playlist https://www.youtube.com/playlist?list=PLZlv_N0_O1gZg3dTMetmsfm_s4lb4-Tg0 --proxy http://127.0.0.1:1080&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;下载字幕&quot;&gt;&lt;a href=&quot;#下载字幕&quot; class=&quot;headerlink&quot; title=&quot;下载字幕&quot;&gt;&lt;/a&gt;下载字幕&lt;/h2&gt;&lt;p&gt;以Youtube Playlist为例，自动生成字幕并指定下载中文和英文字幕：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;youtube-dl.exe --yes-playlist https://www.youtube.com/playlist?list=PLZlv_N0_O1gZg3dTMetmsfm_s4lb4-Tg0 --proxy http://127.0.0.1:1080 --write-auto-sub --sub-lang en,cn&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;字幕相关设定：&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;--write-sub                      写字幕文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--write-auto-sub                 写入自动生成的字幕文件 (YouTube only)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--all-subs                       下载所有可提供的字幕&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--list-subs                      列出当前视频支持的所有字幕&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--sub-format FORMAT              指定字幕格式，比如 &lt;span class=&quot;string&quot;&gt;&quot;srt&quot;&lt;/span&gt; 或者 &lt;span class=&quot;string&quot;&gt;&quot;ass/srt/best&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;--sub-lang LANGS                 指定字幕语言，用`,`分隔, 使用 IETF 语言标记，比如 &lt;span class=&quot;string&quot;&gt;&#39;en,pt&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;IETF语言标记参见&lt;a href=&quot;http://www.ietf.org/assignments/language-subtag-registry/language-subtag-registry&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年12月18日 首次发布&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;因为学习需要，产生了一个这样的需求：要从Youtube上批量下载视频。自然，出于方便使用的角度来看，音画不能分离，最好带有对应的字幕。一番搜罗之后，我找到了基于Python的开源产品： &lt;a href=&quot;https://rg3.github.io/youtube-dl/&quot;&gt;youtube-dl&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;值得一提的是，youtube-dl不仅仅能下载youtube上的视频，它支持的视频链接种类多达700+种，几乎囊括了所有在线视频网站，列表参见&lt;a href=&quot;https://rg3.github.io/youtube-dl/supportedsites.html&quot;&gt;此处&lt;/a&gt;。让我不由得感慨开源的力量。除此以外，某些不存在的网址需要自备梯子，不再赘述。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="Video" scheme="https://xuanwo.org/tags/Video/"/>
    
  </entry>
  
  <entry>
    <title>断电也能上网！——路由器改造记</title>
    <link href="https://xuanwo.org/2015/11/27/surf-with-poweroff/"/>
    <id>https://xuanwo.org/2015/11/27/surf-with-poweroff/</id>
    <published>2015-11-27T01:34:33.000Z</published>
    <updated>2016-04-18T06:43:21.546Z</updated>
    
    <content type="html">&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;前两天我对我们宿舍的路由器进行了小小的改造，使得我们在断电之后也能照常上网。原理非常简单：就是使用充电宝来给路由器供电——因为我们墙上的网口是不会断电的，所以只要解决了路由器没有电的问题，就可以解决断网问题。路由器要求的输入电压为5V，电流为0.3A，恰好跟我们常用的充电宝是一致的，淘宝买一根USB转DV线成功解决问题。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;供电方案&quot;&gt;&lt;a href=&quot;#供电方案&quot; class=&quot;headerlink&quot; title=&quot;供电方案&quot;&gt;&lt;/a&gt;供电方案&lt;/h1&gt;&lt;p&gt;我们宿舍现在的路由器供电方案是这样的：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;充电器（A型USB接口）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;充电宝（Micro B型USB接口）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    |内部电路|&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;充电宝（A型USB接口）&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;路由器（DV接口）&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;达成效果&quot;&gt;&lt;a href=&quot;#达成效果&quot; class=&quot;headerlink&quot; title=&quot;达成效果&quot;&gt;&lt;/a&gt;达成效果&lt;/h1&gt;&lt;p&gt;现在达成的效果是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;白天：充电器给充电宝充电，充电宝起到了稳流的作用&lt;/li&gt;
&lt;li&gt;晚上：充电宝为路由器供电&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;优点&quot;&gt;&lt;a href=&quot;#优点&quot; class=&quot;headerlink&quot; title=&quot;优点&quot;&gt;&lt;/a&gt;优点&lt;/h2&gt;&lt;p&gt;自动循环，自动切换（切换的速度很快，撸啊撸都不会掉线哦~）&lt;/p&gt;
&lt;h2 id=&quot;缺点&quot;&gt;&lt;a href=&quot;#缺点&quot; class=&quot;headerlink&quot; title=&quot;缺点&quot;&gt;&lt;/a&gt;缺点&lt;/h2&gt;&lt;p&gt;充电宝损耗大，不知道我这个已经用了一年的充电宝能坚持多久= =&lt;/p&gt;
&lt;h1 id=&quot;硬件要求&quot;&gt;&lt;a href=&quot;#硬件要求&quot; class=&quot;headerlink&quot; title=&quot;硬件要求&quot;&gt;&lt;/a&gt;硬件要求&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;主流充电宝的电压均为5V1A，有部分充电宝为iPad提供了2A的输出接口，加上充电宝自动限流的功能，所有充电宝这一部分问题不大。&lt;br&gt;路由器很显然必须为5V，如果是12V的路由器还需要另外购买升压模块，电流问题不大，充电宝基本都带得动。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;辟谣&quot;&gt;&lt;a href=&quot;#辟谣&quot; class=&quot;headerlink&quot; title=&quot;辟谣&quot;&gt;&lt;/a&gt;辟谣&lt;/h1&gt;&lt;h2 id=&quot;用充电宝网速是不是会变慢？&quot;&gt;&lt;a href=&quot;#用充电宝网速是不是会变慢？&quot; class=&quot;headerlink&quot; title=&quot;用充电宝网速是不是会变慢？&quot;&gt;&lt;/a&gt;用充电宝网速是不是会变慢？&lt;/h2&gt;&lt;p&gt;实测： &lt;strong&gt;不会&lt;/strong&gt;&lt;br&gt;相反的，由于断电之后同时上网的设备数量减少，在延时，最高速率等参数上还有着更加优秀的表现。&lt;/p&gt;
&lt;h2 id=&quot;用充电宝会导致无法链接Wifi？&quot;&gt;&lt;a href=&quot;#用充电宝会导致无法链接Wifi？&quot; class=&quot;headerlink&quot; title=&quot;用充电宝会导致无法链接Wifi？&quot;&gt;&lt;/a&gt;用充电宝会导致无法链接Wifi？&lt;/h2&gt;&lt;p&gt;舍友反馈的，我只说一句： 不要相信玄学。&lt;br&gt;路由器换一种供电方式会影响到你电脑上的无线网卡的信号发送？这种说法，我肯定是不相信的- -。&lt;/p&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年11月27日 完成初稿&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;前两天我对我们宿舍的路由器进行了小小的改造，使得我们在断电之后也能照常上网。原理非常简单：就是使用充电宝来给路由器供电——因为我们墙上的网口是不会断电的，所以只要解决了路由器没有电的问题，就可以解决断网问题。路由器要求的输入电压为5V，电流为0.3A，恰好跟我们常用的充电宝是一致的，淘宝买一根USB转DV线成功解决问题。&lt;/p&gt;
    
    </summary>
    
      <category term="Daily" scheme="https://xuanwo.org/categories/Daily/"/>
    
    
      <category term="Hardware" scheme="https://xuanwo.org/tags/Hardware/"/>
    
  </entry>
  
  <entry>
    <title>文本转换神器——Pandoc</title>
    <link href="https://xuanwo.org/2015/11/14/pandoc/"/>
    <id>https://xuanwo.org/2015/11/14/pandoc/</id>
    <published>2015-11-14T14:29:18.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;Pandoc是一个用haskell编写的文本转换工具，小巧迅速且支持格式广泛，堪称文本转换应用的瑞士军刀。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;支持格式&quot;&gt;&lt;a href=&quot;#支持格式&quot; class=&quot;headerlink&quot; title=&quot;支持格式&quot;&gt;&lt;/a&gt;支持格式&lt;/h1&gt;&lt;h2 id=&quot;输入&quot;&gt;&lt;a href=&quot;#输入&quot; class=&quot;headerlink&quot; title=&quot;输入&quot;&gt;&lt;/a&gt;输入&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://docutils.sourceforge.net/docs/ref/rst/introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reStructuredText&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://redcloth.org/textile&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;textile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.w3.org/TR/html40/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.docbook.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DocBook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.latex-project.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LaTeX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mediawiki.org/wiki/Help:Formatting&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MediaWiki markup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://twiki.org/cgi-bin/view/TWiki/TextFormattingRules&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TWiki markup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://dev.opml.org/spec2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OPML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Emacs &lt;a href=&quot;http://orgmode.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Org-Mode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://txt2tags.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Txt2Tags&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Microsoft Word &lt;a href=&quot;http://www.microsoft.com/interop/openup/openxml/default.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;docx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;LibreOffice &lt;a href=&quot;http://en.wikipedia.org/wiki/OpenDocument&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ODT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/EPUB&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.haskell.org/haddock/doc/html/ch03s08.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Haddock markup&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;输出&quot;&gt;&lt;a href=&quot;#输出&quot; class=&quot;headerlink&quot; title=&quot;输出&quot;&gt;&lt;/a&gt;输出&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;HTML格式: XHTML, HTML5, 和 HTML slide shows using&lt;br&gt;&lt;a href=&quot;http://www.w3.org/Talks/Tools/Slidy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Slidy&lt;/a&gt;,&lt;br&gt;&lt;a href=&quot;http://lab.hakim.se/reveal-js/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reveal.js&lt;/a&gt;,&lt;br&gt;&lt;a href=&quot;http://goessner.net/articles/slideous/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Slideous&lt;/a&gt;,&lt;br&gt;&lt;a href=&quot;http://meyerweb.com/eric/tools/s5/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;S5&lt;/a&gt;, 或&lt;br&gt;&lt;a href=&quot;http://paulrouget.com/dzslides/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DZSlides&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;字处理格式: Microsoft Word&lt;br&gt;&lt;a href=&quot;http://www.microsoft.com/interop/openup/openxml/default.aspx&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;docx&lt;/a&gt;,&lt;br&gt;OpenOffice/LibreOffice&lt;br&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/OpenDocument&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ODT&lt;/a&gt;, &lt;a href=&quot;http://opendocument.xml.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OpenDocument&lt;br&gt;XML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;电子书: &lt;a href=&quot;http://en.wikipedia.org/wiki/EPUB&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EPUB&lt;/a&gt; version 2或3,&lt;br&gt;&lt;a href=&quot;http://www.fictionbook.org/index.php/Eng:XML_Schema_Fictionbook_2.1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FictionBook2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;文档格式: &lt;a href=&quot;http://www.docbook.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DocBook&lt;/a&gt;, &lt;a href=&quot;http://www.gnu.org/software/texinfo/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GNU&lt;br&gt;TexInfo&lt;/a&gt;, &lt;a href=&quot;http://www.gnu.org/software/groff/groff.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Groff&lt;br&gt;man&lt;/a&gt; pages, &lt;a href=&quot;http://www.haskell.org/haddock/doc/html/ch03s08.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Haddock&lt;br&gt;markup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;页面布局格式: &lt;a href=&quot;https://www.adobe.com/content/dam/Adobe/en/devnet/indesign/cs55-docs/IDML/idml-specification.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;InDesign&lt;br&gt;ICML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;大纲格式: &lt;a href=&quot;http://dev.opml.org/spec2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OPML&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;TeX 格式: &lt;a href=&quot;http://www.latex-project.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LaTeX&lt;/a&gt;,&lt;br&gt;&lt;a href=&quot;http://www.pragma-ade.nl/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ConTeXt&lt;/a&gt;, LaTeX Beamer slides&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Portable_Document_Format&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;PDF&lt;/a&gt; via&lt;br&gt;LaTeX&lt;/li&gt;
&lt;li&gt;轻量级标记格式:&lt;br&gt;&lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Markdown&lt;/a&gt; (including&lt;br&gt;&lt;a href=&quot;http://commonmark.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CommonMark&lt;/a&gt;),&lt;br&gt;&lt;a href=&quot;http://docutils.sourceforge.net/docs/ref/rst/introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;reStructuredText&lt;/a&gt;,&lt;br&gt;&lt;a href=&quot;http://www.methods.co.nz/asciidoc/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AsciiDoc&lt;/a&gt;, &lt;a href=&quot;http://www.mediawiki.org/wiki/Help:Formatting&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MediaWiki&lt;br&gt;markup&lt;/a&gt;, &lt;a href=&quot;https://www.dokuwiki.org/wiki:syntax&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DokuWiki&lt;br&gt;markup&lt;/a&gt;, Emacs&lt;br&gt;&lt;a href=&quot;http://orgmode.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Org-Mode&lt;/a&gt;,&lt;br&gt;&lt;a href=&quot;http://redcloth.org/textile&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Textile&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;自定义格式: custom writers can be written in&lt;br&gt;&lt;a href=&quot;http://www.lua.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;lua&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;h2 id=&quot;安装Pandoc&quot;&gt;&lt;a href=&quot;#安装Pandoc&quot; class=&quot;headerlink&quot; title=&quot;安装Pandoc&quot;&gt;&lt;/a&gt;安装Pandoc&lt;/h2&gt;&lt;p&gt;在&lt;a href=&quot;https://github.com/jgm/pandoc/releases&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此页面&lt;/a&gt;上寻找对应平台的二进制安装包&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Windows平台需要将Pandoc加入Path目录才能在cmd环境中调用&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;安装Tex支持（可选，用于编译Tex并输出PDF）&quot;&gt;&lt;a href=&quot;#安装Tex支持（可选，用于编译Tex并输出PDF）&quot; class=&quot;headerlink&quot; title=&quot;安装Tex支持（可选，用于编译Tex并输出PDF）&quot;&gt;&lt;/a&gt;安装Tex支持（可选，用于编译Tex并输出PDF）&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;Windows平台建议&lt;a href=&quot;http://miktex.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MiKTeX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;MacOS平台建议&lt;a href=&quot;http://www.tug.org/mactex/morepackages.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;BasicTeX&lt;/a&gt;并使用&lt;code&gt;tlmgr&lt;/code&gt;工具安装需要的包&lt;/li&gt;
&lt;li&gt;Linux平台建议&lt;a href=&quot;http://www.tug.org/texlive/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Tex Live&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;使用&quot;&gt;&lt;a href=&quot;#使用&quot; class=&quot;headerlink&quot; title=&quot;使用&quot;&gt;&lt;/a&gt;使用&lt;/h1&gt;&lt;p&gt;&lt;em&gt;你可以使用在线的&lt;a href=&quot;http://pandoc.org/try/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;DEMO&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pandoc x.html -o x.md&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pandoc -f html -t markdown http://www.fsf.org&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-f&lt;/code&gt;参数用于指定源文件格式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-t&lt;/code&gt;参数用于指定输出文件格式&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-o&lt;/code&gt;参数用于指定输出文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;如果不使用&lt;code&gt;-f&lt;/code&gt;和&lt;code&gt;-t&lt;/code&gt;参数，pandoc将会根据输入文件以及&lt;code&gt;-o&lt;/code&gt;指定的输出文件格式来确定转换的格式类型&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&quot;注意事项&quot;&gt;&lt;a href=&quot;#注意事项&quot; class=&quot;headerlink&quot; title=&quot;注意事项&quot;&gt;&lt;/a&gt;注意事项&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Pandoc不支持&lt;code&gt;.doc&lt;/code&gt;格式，如果需要进行转换，则需要先将&lt;code&gt;.doc&lt;/code&gt;转换为&lt;code&gt;.docx&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;引用资源&quot;&gt;&lt;a href=&quot;#引用资源&quot; class=&quot;headerlink&quot; title=&quot;引用资源&quot;&gt;&lt;/a&gt;引用资源&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://pandoc.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Pandoc官网 &lt;em&gt;需要梯子&lt;/em&gt; &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://pandoc.org/README.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Pandoc User Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://yanping.me/cn/blog/2012/03/13/pandoc/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;黑魔法利器pandoc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.yangzhiping.com/tech/pandoc.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Markdown写作进阶：Pandoc入门浅谈&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年11月14日 完成初步使用&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;p&gt;Pandoc是一个用haskell编写的文本转换工具，小巧迅速且支持格式广泛，堪称文本转换应用的瑞士军刀。&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
  </entry>
  
  <entry>
    <title>Python包分发详解</title>
    <link href="https://xuanwo.org/2015/11/03/python-packages/"/>
    <id>https://xuanwo.org/2015/11/03/python-packages/</id>
    <published>2015-11-03T15:24:06.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;用Python写过不少的脚本，现在要把脚本打包成模块并进行发布，然后才明白脚本Boy到正规的码农差距有多大= =。&lt;br&gt;踩了很多天的坑之后，自己学习到了Python的包分发机制，以及如何利用Pypi向全世界分发自己的模块。现在简单地做一些整理。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;Python包机制&quot;&gt;&lt;a href=&quot;#Python包机制&quot; class=&quot;headerlink&quot; title=&quot;Python包机制&quot;&gt;&lt;/a&gt;Python包机制&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;包是一个模块或模块/子模块的集合，一般情况下被压缩到一个压缩包中。&lt;br&gt;其中包含&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;依赖信息&lt;/li&gt;
&lt;li&gt;将文件拷贝到标准的包搜索路径的指令。&lt;/li&gt;
&lt;li&gt;编译指令(如果在安装前代码必须被编译的话)。&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;也就是说，为了分发模块，我们需要把模块的依赖信息和模块一起打包。在Python中，这个打包好的可分发的文件一般以&lt;code&gt;.egg&lt;/code&gt;结尾，其作用可以理解为java中的jar。Python的包管理以及分发曾经经历过非常混乱的一段时期，但是如今已经基本稳定（或者说，流行？）为两个套件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;打包&amp;amp;分发：&lt;a href=&quot;https://pythonhosted.org/setuptools/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Setuptools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;安装&amp;amp;管理：&lt;a href=&quot;https://pip.readthedocs.org/en/stable/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pip&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h1&gt;&lt;h2 id=&quot;注册Pypi&quot;&gt;&lt;a href=&quot;#注册Pypi&quot; class=&quot;headerlink&quot; title=&quot;注册Pypi&quot;&gt;&lt;/a&gt;注册Pypi&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Pypi - the Python Package Index&lt;br&gt;Pypi是Python语言包的仓库，全世界所有开源Python开发者都会在Pypi上提交&amp;amp;下载软件包&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;为了我们后续的提交操作，我们需要首先&lt;a href=&quot;https://pypi.python.org/pypi?%3Aaction=register_form&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;注册&lt;/a&gt;一个Pypi的账号，注册非常简单，提供用户名，密码以及邮箱，经过验证之后就注册完成了。&lt;/p&gt;
&lt;h2 id=&quot;目录结构&quot;&gt;&lt;a href=&quot;#目录结构&quot; class=&quot;headerlink&quot; title=&quot;目录结构&quot;&gt;&lt;/a&gt;目录结构&lt;/h2&gt;&lt;p&gt;Python没有严格的工程目录要求，只要有&lt;code&gt;__init__.py&lt;/code&gt;在的地方，就会被认为是一个Python的包。但是出于方便协作考虑，可以把自己的源代码与各种脚本分开存放。具体的结构可以学习Github上比较流行的Python项目，选择自己喜欢的即可。&lt;/p&gt;
&lt;h2 id=&quot;环境配置&quot;&gt;&lt;a href=&quot;#环境配置&quot; class=&quot;headerlink&quot; title=&quot;环境配置&quot;&gt;&lt;/a&gt;环境配置&lt;/h2&gt;&lt;p&gt;首先你需要有pip，pip自从&lt;code&gt;3.4&lt;/code&gt;版本开始已经随python内置发布，如果使用的版本比较低，可以自己手动进行安装：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sudo apt-get install python-pip&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后我们需要安装&lt;code&gt;setuptools&lt;/code&gt;：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install setuptools&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;编写安装脚本&quot;&gt;&lt;a href=&quot;#编写安装脚本&quot; class=&quot;headerlink&quot; title=&quot;编写安装脚本&quot;&gt;&lt;/a&gt;编写安装脚本&lt;/h1&gt;&lt;p&gt;准备工作就绪之后，我们就可以开始编写安装脚本了。&lt;/p&gt;
&lt;h2 id=&quot;填写配置信息&quot;&gt;&lt;a href=&quot;#填写配置信息&quot; class=&quot;headerlink&quot; title=&quot;填写配置信息&quot;&gt;&lt;/a&gt;填写配置信息&lt;/h2&gt;&lt;h3 id=&quot;基本框架&quot;&gt;&lt;a href=&quot;#基本框架&quot; class=&quot;headerlink&quot; title=&quot;基本框架&quot;&gt;&lt;/a&gt;基本框架&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; setuptools &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; setup, find_packages &lt;span class=&quot;comment&quot;&gt;# 引入setuptools包&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setup(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    option = values, &lt;span class=&quot;comment&quot;&gt;# 本质上是一个函数的参数，分行写便于维护&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;参数介绍&quot;&gt;&lt;a href=&quot;#参数介绍&quot; class=&quot;headerlink&quot; title=&quot;参数介绍&quot;&gt;&lt;/a&gt;参数介绍&lt;/h3&gt;&lt;h4 id=&quot;指定整个包&quot;&gt;&lt;a href=&quot;#指定整个包&quot; class=&quot;headerlink&quot; title=&quot;指定整个包&quot;&gt;&lt;/a&gt;指定整个包&lt;/h4&gt;&lt;h4 id=&quot;指定单独模块&quot;&gt;&lt;a href=&quot;#指定单独模块&quot; class=&quot;headerlink&quot; title=&quot;指定单独模块&quot;&gt;&lt;/a&gt;指定单独模块&lt;/h4&gt;&lt;h4 id=&quot;依赖关系&quot;&gt;&lt;a href=&quot;#依赖关系&quot; class=&quot;headerlink&quot; title=&quot;依赖关系&quot;&gt;&lt;/a&gt;依赖关系&lt;/h4&gt;&lt;h4 id=&quot;包内数据&quot;&gt;&lt;a href=&quot;#包内数据&quot; class=&quot;headerlink&quot; title=&quot;包内数据&quot;&gt;&lt;/a&gt;包内数据&lt;/h4&gt;&lt;h4 id=&quot;其他数据&quot;&gt;&lt;a href=&quot;#其他数据&quot; class=&quot;headerlink&quot; title=&quot;其他数据&quot;&gt;&lt;/a&gt;其他数据&lt;/h4&gt;&lt;h4 id=&quot;Meta-Data&quot;&gt;&lt;a href=&quot;#Meta-Data&quot; class=&quot;headerlink&quot; title=&quot;Meta-Data&quot;&gt;&lt;/a&gt;Meta-Data&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Meta-Data&lt;/th&gt;
&lt;th&gt;描述值&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;name&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;包名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;version&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;此次发布版本&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;author&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;作者名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;author_email&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;作者邮箱&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;maintainer&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;维护者名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;maintainer_email&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;维护者邮箱&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;url&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;主页&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;description&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;简要描述&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;long_description&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;详细描述&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;download_url&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;下载地址&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;classifiers&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;分类，参见&lt;a href=&quot;https://pypi.python.org/pypi?%3Aaction=list_classifiers&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;platforms&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;平台列表&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;license&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;授权协议&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;典型配置&quot;&gt;&lt;a href=&quot;#典型配置&quot; class=&quot;headerlink&quot; title=&quot;典型配置&quot;&gt;&lt;/a&gt;典型配置&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; setuptools &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; setup, find_packages&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setup(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    name = &lt;span class=&quot;string&quot;&gt;&quot;HelloWorld&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    version = &lt;span class=&quot;string&quot;&gt;&quot;0.1&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    packages = find_packages(),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    scripts = [&lt;span class=&quot;string&quot;&gt;&#39;say_hello.py&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# Project uses reStructuredText, so ensure that the docutils get&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# installed or upgraded on the target machine&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    install_requires = [&lt;span class=&quot;string&quot;&gt;&#39;docutils&amp;gt;=0.3&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    package_data = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# If any package contains *.txt or *.rst files, include them:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;*.txt&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;*.rst&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;# And include any *.msg files found in the &#39;hello&#39; package, too:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;string&quot;&gt;&#39;hello&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;*.msg&#39;&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# metadata for upload to PyPI&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    author = &lt;span class=&quot;string&quot;&gt;&quot;Me&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    author_email = &lt;span class=&quot;string&quot;&gt;&quot;me@example.com&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    description = &lt;span class=&quot;string&quot;&gt;&quot;This is an Example Package&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    license = &lt;span class=&quot;string&quot;&gt;&quot;PSF&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    keywords = &lt;span class=&quot;string&quot;&gt;&quot;hello world example examples&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    url = &lt;span class=&quot;string&quot;&gt;&quot;http://example.com/HelloWorld/&quot;&lt;/span&gt;,   &lt;span class=&quot;comment&quot;&gt;# project home page, if any&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;# could also include long_description, download_url, classifiers, etc.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;打包&quot;&gt;&lt;a href=&quot;#打包&quot; class=&quot;headerlink&quot; title=&quot;打包&quot;&gt;&lt;/a&gt;打包&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;这个坑踩了很久- -，没有老司机的带的痛苦&lt;br&gt;与开发环境不同的时候，当用户运行你的包时，使用open等命令是以当前目录为根运行的，所以你必须指定数据所在位置，否则会出现IOError甚至更糟糕的情况&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;指定需要分发的文件&quot;&gt;&lt;a href=&quot;#指定需要分发的文件&quot; class=&quot;headerlink&quot; title=&quot;指定需要分发的文件&quot;&gt;&lt;/a&gt;指定需要分发的文件&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;自动处理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;当没有&lt;code&gt;MANIFEST.in&lt;/code&gt;文件时，Setuptools将会按照下面的原则处理文件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;所有&lt;code&gt;py_modules&lt;/code&gt;和&lt;code&gt;packages&lt;/code&gt;选项包含的Python源文件&lt;/li&gt;
&lt;li&gt;所有&lt;code&gt;ext_modules&lt;/code&gt;或&lt;code&gt;libraries&lt;/code&gt;选项指定的C源文件&lt;/li&gt;
&lt;li&gt;&lt;code&gt;scripts&lt;/code&gt;指定的脚本（&lt;em&gt;参见&lt;a href=&quot;https://docs.python.org/3.5/distutils/setupscript.html#distutils-installing-scripts&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Installing Scripts&lt;/a&gt;&lt;/em&gt;）&lt;/li&gt;
&lt;li&gt;形如&lt;code&gt;test/test*.py&lt;/code&gt;的文件&lt;/li&gt;
&lt;li&gt;&lt;code&gt;README.txt&lt;/code&gt;（或&lt;code&gt;README&lt;/code&gt;），&lt;code&gt;setup.py&lt;/code&gt;和&lt;code&gt;setup.cfg&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;符合&lt;code&gt;package_data&lt;/code&gt;选项的所有文件（&lt;em&gt;参见&lt;a href=&quot;https://docs.python.org/3.5/distutils/setupscript.html#distutils-installing-package-data&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Installing Package Data&lt;/a&gt;&lt;/em&gt;）&lt;/li&gt;
&lt;li&gt;符合&lt;code&gt;data_files&lt;/code&gt;选项的所有文件（&lt;em&gt;参见&lt;a href=&quot;https://docs.python.org/3.5/distutils/setupscript.html#distutils-additional-files&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Installing Additional Files&lt;/a&gt;&lt;/em&gt;）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;翻译自&lt;a href=&quot;https://docs.python.org/3.5/distutils/sourcedist.html#specifying-the-files-to-distribute&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python官方文档 Specifying the files to distribute&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;手动处理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;一般而言，自动处理已经足够，但是如果想要自己指定的话，则需要编辑&lt;code&gt;MANIFEST.in&lt;/code&gt;模板文件。&lt;br&gt;&lt;code&gt;MANIFEST.in&lt;/code&gt;模板文件很简单，每一行都导入或者导出表示符合正则的一类文件。比如说：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# 导入根目录下满足*.txt的文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;include *.txt&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 递归导入examples目录下满足*.txt和*.py的文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;recursive-include examples *.txt *.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# 导入满足examples/sample?/build的文件夹下所有文件&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;prune examples/sample?/build&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;详细语法参见&lt;a href=&quot;https://docs.python.org/3.5/distutils/commandref.html#sdist-cmd&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：&lt;br&gt;当根目录下存在&lt;code&gt;MANIFEST.in&lt;/code&gt;文件时，Setuptools将不会再采用自动处理的设定，因此需要在&lt;code&gt;MANIFEST.in&lt;/code&gt;文件中指明所有需要导入的文件。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;调用数据&quot;&gt;&lt;a href=&quot;#调用数据&quot; class=&quot;headerlink&quot; title=&quot;调用数据&quot;&gt;&lt;/a&gt;调用数据&lt;/h3&gt;&lt;p&gt;当你需要调用Python包中的文件时，你可以使用下面的方法：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; pkg_resources &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; resource_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data = resource_string(__name__, &lt;span class=&quot;string&quot;&gt;&#39;data.dat&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;此时，指定的&lt;code&gt;data.dat&lt;/code&gt;文件将会以二进制文件流的形式赋值到data变量中，你可以按照自己的需要进行进一步处理。比如说：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;from pkg_resources import resource_string&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data = resource_string(__name__, &amp;apos;example.yml&amp;apos;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    with open(&amp;apos;config.yml&amp;apos;, &amp;apos;w&amp;apos;) as f:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        f.write(str(data, encoding=&amp;apos;utf-8&amp;apos;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        f.close()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述代码实现了从&lt;code&gt;example.yml&lt;/code&gt;中读取数据并保存到&lt;code&gt;config.yml&lt;/code&gt;文件中。&lt;/p&gt;
&lt;h3 id=&quot;创建源码分发包&quot;&gt;&lt;a href=&quot;#创建源码分发包&quot; class=&quot;headerlink&quot; title=&quot;创建源码分发包&quot;&gt;&lt;/a&gt;创建源码分发包&lt;/h3&gt;&lt;p&gt;在包的根目录下执行：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;python setup.py sdist&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;默认情况下，&lt;code&gt;sdist&lt;/code&gt;命令将会为Unix创建&lt;code&gt;gzip&lt;/code&gt;压缩文件，为Windows创建&lt;code&gt;zip&lt;/code&gt;压缩文件&lt;br&gt;你也可以添加参数&lt;code&gt;--formats=zip&lt;/code&gt;指定生成的文件类型，所有支持的参数见&lt;a href=&quot;https://docs.python.org/3.5/distutils/sourcedist.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;源码分发似乎不会导入&lt;code&gt;package_data&lt;/code&gt;中指定的数据，如果上传本分发包可能导致用户通过&lt;code&gt;pip&lt;/code&gt;安装的包中没有需要的数据。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;创建二进制分发包&quot;&gt;&lt;a href=&quot;#创建二进制分发包&quot; class=&quot;headerlink&quot; title=&quot;创建二进制分发包&quot;&gt;&lt;/a&gt;创建二进制分发包&lt;/h3&gt;&lt;p&gt;除了创建源码分发之外，我们还可以创建基于平台的二进制分发包。&lt;br&gt;在包的根目录下执行：&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;python setup.py bdist&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;默认情况下，这个命令将会创建基于自身平台的分发包。&lt;br&gt;同样的，你也可以添加&lt;code&gt;--format=zip&lt;/code&gt;参数来指定生成的文件，支持的参数见&lt;a href=&quot;https://docs.python.org/3.5/distutils/builtdist.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;此处&lt;/a&gt;&lt;br&gt;除此之外，也可以使用以下的命令直接生成对应格式的分发包：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;命令&lt;/th&gt;
&lt;th&gt;格式&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;bdist_dumb&lt;/td&gt;
&lt;td&gt;tar, gztar, bztar, xztar, ztar, zip&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bdist_rpm&lt;/td&gt;
&lt;td&gt;rpm, srpm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bdist_wininst&lt;/td&gt;
&lt;td&gt;wininst&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;bdist_msi&lt;/td&gt;
&lt;td&gt;msi&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;这一命令无法跨平台， 在Linux上选择制作&lt;code&gt;wininst&lt;/code&gt;分发包时会提示缺乏相应的支持。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;创建wheel分发包&quot;&gt;&lt;a href=&quot;#创建wheel分发包&quot; class=&quot;headerlink&quot; title=&quot;创建wheel分发包&quot;&gt;&lt;/a&gt;创建wheel分发包&lt;/h3&gt;&lt;p&gt;wheel是新出的分发格式，旨在取代egg，你可以通过下列命令进行安装：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;pip install wheel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;然后在包的根目录下执行：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;python setup.ppy bdist_wheel&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;上传到Pypi&quot;&gt;&lt;a href=&quot;#上传到Pypi&quot; class=&quot;headerlink&quot; title=&quot;上传到Pypi&quot;&gt;&lt;/a&gt;上传到Pypi&lt;/h1&gt;&lt;h2 id=&quot;注册包&quot;&gt;&lt;a href=&quot;#注册包&quot; class=&quot;headerlink&quot; title=&quot;注册包&quot;&gt;&lt;/a&gt;注册包&lt;/h2&gt;&lt;p&gt;在上传我们的包之前，我们需要首先向Pypi提交包的相关信息。&lt;br&gt;在包的根目录下执行:&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;python setup.py register&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;没有登陆的话，需要进行登陆；如果已经登陆，直接回车使用默认设置即可。&lt;/p&gt;
&lt;h2 id=&quot;上传包&quot;&gt;&lt;a href=&quot;#上传包&quot; class=&quot;headerlink&quot; title=&quot;上传包&quot;&gt;&lt;/a&gt;上传包&lt;/h2&gt;&lt;p&gt;注册完毕后，我们可以提交我们的包了。&lt;br&gt;在包的根目录下执行：&lt;br&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;python setup.py sdist bdist_wininst upload&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这条命令将会向Pypi提交源码和Win下的安装包，如果需要上传别的包，只要直接写出即可。&lt;/p&gt;
&lt;h1 id=&quot;参考资料&quot;&gt;&lt;a href=&quot;#参考资料&quot; class=&quot;headerlink&quot; title=&quot;参考资料&quot;&gt;&lt;/a&gt;参考资料&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/dccrazyboy/pyeco/blob/master/pyeco.rst&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python开发生态环境简介&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://timd.cn/2015/10/20/setuptools/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;使用Setuptools构建和分发python包&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://python3-cookbook.readthedocs.org/zh_CN/latest/c10/p08_read_datafile_within_package.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;10.8 读取位于包中的数据文件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.python.org/3.5/distutils/sourcedist.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Creating a Source Distribution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.python.org/3.5/distutils/examples.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Examples&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年11月03日 初步完成&lt;/li&gt;
&lt;li&gt;2016年03月30日 修复了部分笔误，添加了一些注释，增加了wheel相关的内容&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;用Python写过不少的脚本，现在要把脚本打包成模块并进行发布，然后才明白脚本Boy到正规的码农差距有多大= =。&lt;br&gt;踩了很多天的坑之后，自己学习到了Python的包分发机制，以及如何利用Pypi向全世界分发自己的模块。现在简单地做一些整理。&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
      <category term="Python" scheme="https://xuanwo.org/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>在Python中使用JSON</title>
    <link href="https://xuanwo.org/2015/10/30/python-JSON/"/>
    <id>https://xuanwo.org/2015/10/30/python-JSON/</id>
    <published>2015-10-30T23:47:23.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;JSON介绍&quot;&gt;&lt;a href=&quot;#JSON介绍&quot; class=&quot;headerlink&quot; title=&quot;JSON介绍&quot;&gt;&lt;/a&gt;JSON介绍&lt;/h1&gt;&lt;p&gt;JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;引用自&lt;a href=&quot;http://www.json.org/json-zh.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;json.org&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;语法&quot;&gt;&lt;a href=&quot;#语法&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/a&gt;语法&lt;/h1&gt;&lt;h2 id=&quot;结构&quot;&gt;&lt;a href=&quot;#结构&quot; class=&quot;headerlink&quot; title=&quot;结构&quot;&gt;&lt;/a&gt;结构&lt;/h2&gt;&lt;p&gt;JSON只提供了两种结构——字典和数组。也就是说，JSON可以存储一对一或者一对多的键值对关系。&lt;/p&gt;
&lt;h2 id=&quot;形式&quot;&gt;&lt;a href=&quot;#形式&quot; class=&quot;headerlink&quot; title=&quot;形式&quot;&gt;&lt;/a&gt;形式&lt;/h2&gt;&lt;h3 id=&quot;对象&quot;&gt;&lt;a href=&quot;#对象&quot; class=&quot;headerlink&quot; title=&quot;对象&quot;&gt;&lt;/a&gt;对象&lt;/h3&gt;&lt;p&gt;对象是一个无序的键值对集合。&lt;br&gt;一个对象以&lt;code&gt;{&lt;/code&gt;开始，&lt;code&gt;}&lt;/code&gt;结束。每个&lt;code&gt;键&lt;/code&gt;后跟一个&lt;code&gt;:&lt;/code&gt;；键值对之间使用&lt;code&gt;,&lt;/code&gt;分隔。&lt;br&gt;&lt;img src=&quot;/imgs/develop/object.gif&quot; alt=&quot;object&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;数组&quot;&gt;&lt;a href=&quot;#数组&quot; class=&quot;headerlink&quot; title=&quot;数组&quot;&gt;&lt;/a&gt;数组&lt;/h3&gt;&lt;p&gt;数组是值的有序集合，一个键可以对应一个数组。&lt;br&gt;一个数组以&lt;code&gt;[&lt;/code&gt;开始，&lt;code&gt;]&lt;/code&gt;结束。值之间使用&lt;code&gt;,&lt;/code&gt;分隔。&lt;br&gt;&lt;img src=&quot;/imgs/develop/array.gif&quot; alt=&quot;array&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;值&quot;&gt;&lt;a href=&quot;#值&quot; class=&quot;headerlink&quot; title=&quot;值&quot;&gt;&lt;/a&gt;值&lt;/h3&gt;&lt;p&gt;值可以是双引号括起来的字符串、数值、true、false、 null、对象或者数组。这些结构可以嵌套。&lt;br&gt;&lt;img src=&quot;/imgs/develop/value.gif&quot; alt=&quot;value&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;字符串&quot;&gt;&lt;a href=&quot;#字符串&quot; class=&quot;headerlink&quot; title=&quot;字符串&quot;&gt;&lt;/a&gt;字符串&lt;/h3&gt;&lt;p&gt;字符串是由双引号包围的任意数量Unicode字符的集合，使用反斜线转义。一个字符即一个单独的字符串。&lt;br&gt;字符串与C/C++中的字符串非常相似，包括常见的各种转义符号。&lt;br&gt;&lt;img src=&quot;/imgs/develop/string.gif&quot; alt=&quot;value&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;数值&quot;&gt;&lt;a href=&quot;#数值&quot; class=&quot;headerlink&quot; title=&quot;数值&quot;&gt;&lt;/a&gt;数值&lt;/h3&gt;&lt;p&gt;数值与C/C++中的数值非常相似，但没有八进制和十六进制格式。&lt;br&gt;&lt;img src=&quot;/imgs/develop/number.gif&quot; alt=&quot;number&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;空白&quot;&gt;&lt;a href=&quot;#空白&quot; class=&quot;headerlink&quot; title=&quot;空白&quot;&gt;&lt;/a&gt;空白&lt;/h3&gt;&lt;p&gt;空白符号（包括空格，Tab以及回车）可以加入到任何符号之间，不会影响JSON的含义&lt;/p&gt;
&lt;h1 id=&quot;Python中的JSON库&quot;&gt;&lt;a href=&quot;#Python中的JSON库&quot; class=&quot;headerlink&quot; title=&quot;Python中的JSON库&quot;&gt;&lt;/a&gt;Python中的JSON库&lt;/h1&gt;&lt;p&gt;&lt;em&gt;以Python 3为基准&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;编码&quot;&gt;&lt;a href=&quot;#编码&quot; class=&quot;headerlink&quot; title=&quot;编码&quot;&gt;&lt;/a&gt;编码&lt;/h2&gt;&lt;h3 id=&quot;对应类型&quot;&gt;&lt;a href=&quot;#对应类型&quot; class=&quot;headerlink&quot; title=&quot;对应类型&quot;&gt;&lt;/a&gt;对应类型&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Python&lt;/th&gt;
&lt;th&gt;JSON&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;dict&lt;/td&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;list, tuple&lt;/td&gt;
&lt;td&gt;array&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;str&lt;/td&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;int, float&lt;/td&gt;
&lt;td&gt;number&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;False&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;None&lt;/td&gt;
&lt;td&gt;null&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;函数&quot;&gt;&lt;a href=&quot;#函数&quot; class=&quot;headerlink&quot; title=&quot;函数&quot;&gt;&lt;/a&gt;函数&lt;/h3&gt;&lt;p&gt;我们使用&lt;code&gt;JSON&lt;/code&gt;库中的&lt;code&gt;dump&lt;/code&gt;以及&lt;code&gt;dumps&lt;/code&gt;函数来进行&lt;code&gt;JSON&lt;/code&gt;编码。&lt;code&gt;dump&lt;/code&gt;和&lt;code&gt;dumps&lt;/code&gt;各项参数含义基本一致，唯一区别在于&lt;code&gt;dump&lt;/code&gt;函数编码产生一个JSON文件流，而&lt;code&gt;dumps&lt;/code&gt;编码产生一个JSON字符串。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;json.dump(obj, fp, skipkeys=&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;, ensure_ascii=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, check_circular=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, allow_nan=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, cls=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, indent=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, separators=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, default=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, sort_keys=&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;, **kw)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;json.dumps(obj, skipkeys=&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;, ensure_ascii=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, check_circular=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, allow_nan=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;, cls=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, indent=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, separators=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, default=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, sort_keys=&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;, **kw)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;obj&lt;/code&gt;：编码对象&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fp&lt;/code&gt;：指定文件流&lt;/li&gt;
&lt;li&gt;&lt;code&gt;skipkeys&lt;/code&gt;：若skipkeys为真，则非标准类型将会跳过；否则返回&lt;code&gt;TypeError&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ensure_ascii&lt;/code&gt;：若&lt;code&gt;ensure_ascii&lt;/code&gt;为真，则输出时将会确保没有非ASCII字符；否则将会原样输出&lt;/li&gt;
&lt;li&gt;&lt;code&gt;check_circular&lt;/code&gt;：若&lt;code&gt;check_circular&lt;/code&gt;为真，则将会检测是否存在循环调用；否则会跳过检测&lt;/li&gt;
&lt;li&gt;&lt;code&gt;allow_nan&lt;/code&gt;：若&lt;code&gt;allow_nan&lt;/code&gt;为真，则将会允许存在空值（无穷大值）；否则会返回&lt;code&gt;ValueError&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cls&lt;/code&gt;：若&lt;code&gt;cls&lt;/code&gt;为空值，则使用&lt;code&gt;JSONEncoder&lt;/code&gt;；否则使用指定子类进行编码&lt;/li&gt;
&lt;li&gt;&lt;code&gt;indent&lt;/code&gt;：若&lt;code&gt;indent&lt;/code&gt;为空值，则无缩进；否则使用指定值进行缩进&lt;/li&gt;
&lt;li&gt;&lt;code&gt;separators&lt;/code&gt;：若&lt;code&gt;separators&lt;/code&gt;为空值，则使用&lt;code&gt;(&amp;#39;,&amp;#39;, &amp;#39;: &amp;#39;)&lt;/code&gt;分隔；否则使用指定的元组进行分隔&lt;/li&gt;
&lt;li&gt;&lt;code&gt;default&lt;/code&gt;：若&lt;code&gt;default&lt;/code&gt;为空值，则使用自带的&lt;code&gt;default&lt;/code&gt;方法；否则使用指定值&lt;/li&gt;
&lt;li&gt;&lt;code&gt;sort_keys&lt;/code&gt;：若&lt;code&gt;sort_keys&lt;/code&gt;为真，则输出将会按照键进行排序&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;示范&quot;&gt;&lt;a href=&quot;#示范&quot; class=&quot;headerlink&quot; title=&quot;示范&quot;&gt;&lt;/a&gt;示范&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;json.dumps([&lt;span class=&quot;string&quot;&gt;&#39;foo&#39;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;bar&#39;&lt;/span&gt;: (&lt;span class=&quot;string&quot;&gt;&#39;baz&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&amp;#125;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;[&quot;foo&quot;, &amp;#123;&quot;bar&quot;: [&quot;baz&quot;, null, 1.0, 2]&amp;#125;]&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 排序&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;print(json.dumps(&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;c&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;b&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;a&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&amp;#125;, sort_keys=&lt;span class=&quot;keyword&quot;&gt;True&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;span class=&quot;string&quot;&gt;&quot;a&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;b&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&quot;c&quot;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 分隔符&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;json.dumps([&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;4&#39;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;6&#39;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;&amp;#125;], separators=(&lt;span class=&quot;string&quot;&gt;&#39;,&#39;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&#39;:&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;[1,2,3,&amp;#123;&quot;4&quot;:5,&quot;6&quot;:7&amp;#125;]&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# Unicode输出&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;json.dumps(&lt;span class=&quot;string&quot;&gt;&quot;\u5317\u4eac&quot;&lt;/span&gt;, ensure_ascii=&lt;span class=&quot;keyword&quot;&gt;False&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;北京&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;解码&quot;&gt;&lt;a href=&quot;#解码&quot; class=&quot;headerlink&quot; title=&quot;解码&quot;&gt;&lt;/a&gt;解码&lt;/h2&gt;&lt;h3 id=&quot;对应类型-1&quot;&gt;&lt;a href=&quot;#对应类型-1&quot; class=&quot;headerlink&quot; title=&quot;对应类型&quot;&gt;&lt;/a&gt;对应类型&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;JSON&lt;/th&gt;
&lt;th&gt;Python&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;object&lt;/td&gt;
&lt;td&gt;dict&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;array&lt;/td&gt;
&lt;td&gt;list&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;string&lt;/td&gt;
&lt;td&gt;str&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;number (int)&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;number (real)&lt;/td&gt;
&lt;td&gt;float&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;td&gt;True&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;td&gt;False&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;null&lt;/td&gt;
&lt;td&gt;None&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;函数-1&quot;&gt;&lt;a href=&quot;#函数-1&quot; class=&quot;headerlink&quot; title=&quot;函数&quot;&gt;&lt;/a&gt;函数&lt;/h3&gt;&lt;p&gt;我们使用&lt;code&gt;JSON&lt;/code&gt;库中的&lt;code&gt;load&lt;/code&gt;以及&lt;code&gt;loads&lt;/code&gt;函数来进行&lt;code&gt;JSON&lt;/code&gt;解码。&lt;code&gt;load&lt;/code&gt;和&lt;code&gt;loads&lt;/code&gt;各项参数含义基本一致，唯一区别在于&lt;code&gt;load&lt;/code&gt;函数用于解码JSON文件流，而&lt;code&gt;loads&lt;/code&gt;用于解码JSON字符串。&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;json.load(fp, cls=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, object_hook=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, parse_float=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, parse_int=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, parse_constant=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, object_pairs_hook=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, **kw)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;json.loads(s, encoding=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, cls=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, object_hook=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, parse_float=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, parse_int=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, parse_constant=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, object_pairs_hook=&lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, **kw)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;fp&lt;/code&gt;：指定文件流&lt;/li&gt;
&lt;li&gt;&lt;code&gt;s&lt;/code&gt;：指定字符串&lt;/li&gt;
&lt;li&gt;&lt;code&gt;encoding&lt;/code&gt;：指定字符串编码&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cls&lt;/code&gt;：若&lt;code&gt;cls&lt;/code&gt;为空值，则使用&lt;code&gt;JSONEncoder&lt;/code&gt;；否则使用指定子类进行编码&lt;/li&gt;
&lt;li&gt;&lt;code&gt;object_hook&lt;/code&gt;：若&lt;code&gt;object_hook&lt;/code&gt;为空值，对象则返回解码器&lt;code&gt;dict&lt;/code&gt;；否则使用自定义类型返回&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse_float&lt;/code&gt;：若&lt;code&gt;parse_float&lt;/code&gt;为空，则JSON浮点数转换为浮点数；否则转换为指定类型&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse_int&lt;/code&gt;：若&lt;code&gt;parse_int&lt;/code&gt;为空，则JSON整数转换为整数；否则转换为指定类型&lt;/li&gt;
&lt;li&gt;&lt;code&gt;parse_constant&lt;/code&gt;若&lt;code&gt;parse_constant&lt;/code&gt;为空，则不会处理非法输入；否则抛出异常&lt;/li&gt;
&lt;li&gt;&lt;code&gt;object_pairs_hook&lt;/code&gt;：若&lt;code&gt;object_pairs_hook&lt;/code&gt;为空值，则数组返回解码器&lt;code&gt;dict&lt;/code&gt;；否则使用自定义类型返回&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;示范-1&quot;&gt;&lt;a href=&quot;#示范-1&quot; class=&quot;headerlink&quot; title=&quot;示范&quot;&gt;&lt;/a&gt;示范&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; json&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&amp;gt;&amp;gt;&amp;gt; &lt;/span&gt;json.loads(&lt;span class=&quot;string&quot;&gt;&#39;[&quot;foo&quot;, &amp;#123;&quot;bar&quot;:[&quot;baz&quot;, null, 1.0, 2]&amp;#125;]&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;string&quot;&gt;&#39;foo&#39;&lt;/span&gt;, &amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;bar&#39;&lt;/span&gt;: [&lt;span class=&quot;string&quot;&gt;&#39;baz&#39;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;None&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;]&amp;#125;]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年10月30日 初步完成&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;JSON介绍&quot;&gt;&lt;a href=&quot;#JSON介绍&quot; class=&quot;headerlink&quot; title=&quot;JSON介绍&quot;&gt;&lt;/a&gt;JSON介绍&lt;/h1&gt;&lt;p&gt;JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C++, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;引用自&lt;a href=&quot;http://www.json.org/json-zh.html&quot;&gt;json.org&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Develop" scheme="https://xuanwo.org/categories/Develop/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="Python" scheme="https://xuanwo.org/tags/Python/"/>
    
      <category term="JSON" scheme="https://xuanwo.org/tags/JSON/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式参考手册</title>
    <link href="https://xuanwo.org/2015/10/29/regex/"/>
    <id>https://xuanwo.org/2015/10/29/regex/</id>
    <published>2015-10-29T16:26:47.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;一直都知道正则表达式的强大，但是总是觉得正则很难学不会，所以一直不得要领。这次因为工作原因，不得不用到正则，于是顺手将它学了起来。入门之后才发现，花费一点时间学习一下正则非常值得，可以成千上百倍地提升你的工作效率。特别是当你经常和批量数据以及规则文本打交道的时候，你会发现完全离不开正则。闲话到此为止，下面进入正题。&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;介绍&quot;&gt;&lt;a href=&quot;#介绍&quot; class=&quot;headerlink&quot; title=&quot;介绍&quot;&gt;&lt;/a&gt;介绍&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;正则表达式，又称正规表示式、正规表示法、正规表达式、规则表达式、常规表示法（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;来自&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;维基百科&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h1 id=&quot;语法&quot;&gt;&lt;a href=&quot;#语法&quot; class=&quot;headerlink&quot; title=&quot;语法&quot;&gt;&lt;/a&gt;语法&lt;/h1&gt;&lt;h2 id=&quot;元字符&quot;&gt;&lt;a href=&quot;#元字符&quot; class=&quot;headerlink&quot; title=&quot;元字符&quot;&gt;&lt;/a&gt;元字符&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;代码&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;.&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配除换行符以外的任意字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\w&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配字母或数字或下划线或汉字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\s&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配任意的空白符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\d&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配数字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\b&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配单词的开始或结束&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;^&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配字符串的开始&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;$&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配字符串的结束&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;字符转义&quot;&gt;&lt;a href=&quot;#字符转义&quot; class=&quot;headerlink&quot; title=&quot;字符转义&quot;&gt;&lt;/a&gt;字符转义&lt;/h2&gt;&lt;p&gt;如果需要使用元字符本身，你需要使用&lt;code&gt;\&lt;/code&gt;来取消转义.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\\&lt;/code&gt; 匹配&lt;code&gt;\&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;C:\\Windows&lt;/code&gt; 匹配 &lt;code&gt;C:\Windows&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;重复&quot;&gt;&lt;a href=&quot;#重复&quot; class=&quot;headerlink&quot; title=&quot;重复&quot;&gt;&lt;/a&gt;重复&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;代码&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;重复零次或更多次&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;重复一次或更多次&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;td&gt;重复零次或一次&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n}&lt;/td&gt;
&lt;td&gt;重复n次&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n,}&lt;/td&gt;
&lt;td&gt;重复n次或更多次&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n,m}&lt;/td&gt;
&lt;td&gt;重复n到m次&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Windows\d+&lt;/code&gt; 匹配Windows后面跟1个或更多数字&lt;/li&gt;
&lt;li&gt;&lt;code&gt;^\w+&lt;/code&gt; 匹配一行的第一个单词(或整个字符串的第一个单词，具体匹配哪个意思得看选项设置)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;字符类&quot;&gt;&lt;a href=&quot;#字符类&quot; class=&quot;headerlink&quot; title=&quot;字符类&quot;&gt;&lt;/a&gt;字符类&lt;/h2&gt;&lt;p&gt;除了使用元字符意外，我们也可以指定一个字符范围，作为一个字符类：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;像[0-9]代表的含意与\d就是完全一致的：一位数字&lt;/li&gt;
&lt;li&gt;[a-z0-9A-Z_]也完全等同于\w（如果只考虑英文的话）&lt;/li&gt;
&lt;li&gt;[abc]表示只匹配abc三个字母中的一个&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;逻辑判断&quot;&gt;&lt;a href=&quot;#逻辑判断&quot; class=&quot;headerlink&quot; title=&quot;逻辑判断&quot;&gt;&lt;/a&gt;逻辑判断&lt;/h2&gt;&lt;p&gt;我们可以使用&lt;code&gt;|&lt;/code&gt;来将不同的规则分开&lt;br&gt;匹配分支条件时会从左往右进行匹配，只要满足了某个分支，就不会再考虑之后的。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\d{5}-\d{4}|\d{5}&lt;/code&gt; 表示匹配&lt;code&gt;12345-1234&lt;/code&gt;或者&lt;code&gt;12345&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;\d{5}|\d{5}-\d{4}&lt;/code&gt; 但如果这样写，&lt;code&gt;12345-1234&lt;/code&gt;就只会匹配前面的&lt;code&gt;12345&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;分组&quot;&gt;&lt;a href=&quot;#分组&quot; class=&quot;headerlink&quot; title=&quot;分组&quot;&gt;&lt;/a&gt;分组&lt;/h2&gt;&lt;p&gt;前面讲到了单个字符的重复，如果有多个字符需要重复的话，我们就需要分组——使用&lt;code&gt;(&lt;/code&gt;和&lt;code&gt;)&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(\d{1,3}.){3}\d{1,3} 表示匹配长得像IP地址的数字串&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;\d{1,3}\.&lt;/code&gt;表示一到三位的数字再加上一个点，分组之后再重复三次，然后再加上一个一到三位的数字&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;反义&quot;&gt;&lt;a href=&quot;#反义&quot; class=&quot;headerlink&quot; title=&quot;反义&quot;&gt;&lt;/a&gt;反义&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;代码&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\W&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配任意不是字母，数字，下划线，汉字的字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\S&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配任意不是空白符的字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\D&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配任意非数字的字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;\B&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配不是单词开头或结束的位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[^x]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配除了x以外的任意字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;[^aeiou]&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;匹配除了aeiou这几个字母以外的任意字符&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;\S+&lt;/code&gt; 匹配不包含空白符的字符串。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;a[^&amp;gt;]+&amp;gt;&lt;/code&gt; 匹配用尖括号括起来的以a开头的字符串。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;参考资源&quot;&gt;&lt;a href=&quot;#参考资源&quot; class=&quot;headerlink&quot; title=&quot;参考资源&quot;&gt;&lt;/a&gt;参考资源&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://deerchao.net/tutorials/regex/regex.htm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;正则表达式30分钟入门教程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://searun.iteye.com/category/61451&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;searun的博客 跟我学正则表达式系列&lt;/a&gt;\&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://cuiqingcai.com/977.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python爬虫入门七之正则表达式 | 静觅&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年10月29日 增加了比较简单&amp;amp;常用的使用方法&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;一直都知道正则表达式的强大，但是总是觉得正则很难学不会，所以一直不得要领。这次因为工作原因，不得不用到正则，于是顺手将它学了起来。入门之后才发现，花费一点时间学习一下正则非常值得，可以成千上百倍地提升你的工作效率。特别是当你经常和批量数据以及规则文本打交道的时候，你会发现完全离不开正则。闲话到此为止，下面进入正题。&lt;/p&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
      <category term="字符串" scheme="https://xuanwo.org/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    
  </entry>
  
  <entry>
    <title>Hash以及Hash校验工具介绍</title>
    <link href="https://xuanwo.org/2015/10/28/hashsum/"/>
    <id>https://xuanwo.org/2015/10/28/hashsum/</id>
    <published>2015-10-28T11:14:56.000Z</published>
    <updated>2016-04-18T06:43:21.542Z</updated>
    
    <content type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;前一阵子的Xcodeghost事件给所有人都好好的上了一课——校验的重要性。无论何时，一定要校验！一定要校验！！一定要校验！！！重要的事情重复三遍总是没错的。如果真的无法做到这一点，最起码这些一定要注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统镜像&lt;/li&gt;
&lt;li&gt;底层开发工具&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;选择官方认证的软件源，地址尽可能地使用HTTPS而非HTTP以避免缓存影响&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;Hash介绍&quot;&gt;&lt;a href=&quot;#Hash介绍&quot; class=&quot;headerlink&quot; title=&quot;Hash介绍&quot;&gt;&lt;/a&gt;Hash介绍&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;散列函数&lt;/strong&gt;（或散列算法，又称哈希函数，英语：Hash Function）是一种从任何一种数据中创建小的数字“指纹”的方法。散列函数把消息或数据压缩成摘要，使得数据量变小，将数据的格式固定下来。该函数将数据打乱混合，重新创建一个叫做散列值（hash values，hash codes，hash sums，或hashes）的指纹。散列值通常用来代表一个短的随机字母和数字组成的字符串。&lt;/p&gt;
&lt;h1 id=&quot;Checksum介绍&quot;&gt;&lt;a href=&quot;#Checksum介绍&quot; class=&quot;headerlink&quot; title=&quot;Checksum介绍&quot;&gt;&lt;/a&gt;Checksum介绍&lt;/h1&gt;&lt;p&gt;校验和（英语：Checksum）是冗余校验的一种形式。 它是通过错误检测方法，对经过空间（如通信）或者时间（如计算机存储）传送的数据的完整性进行检查的一种简单方法。&lt;br&gt;计算机领域常见的校验和的方法有循环冗余校验（CRC）、MD5、SHA家族等。&lt;/p&gt;
&lt;h1 id=&quot;Hash校验工具&quot;&gt;&lt;a href=&quot;#Hash校验工具&quot; class=&quot;headerlink&quot; title=&quot;Hash校验工具&quot;&gt;&lt;/a&gt;Hash校验工具&lt;/h1&gt;&lt;h2 id=&quot;Web&quot;&gt;&lt;a href=&quot;#Web&quot; class=&quot;headerlink&quot; title=&quot;Web&quot;&gt;&lt;/a&gt;Web&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://xuanwo.org/hashcalc&quot;&gt;hashcalc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;基于&lt;a href=&quot;https://github.com/hacst/HTML5HASH&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML5HASH&lt;/a&gt;修改而来，感谢&lt;a href=&quot;http://hacst.net/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Stefan Hacker&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&quot;Windows&quot;&gt;&lt;a href=&quot;#Windows&quot; class=&quot;headerlink&quot; title=&quot;Windows&quot;&gt;&lt;/a&gt;Windows&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;http://www.slavasoft.com/hashcalc/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;hashcalc&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;/imgs/opinion/hashcalc.png&quot; alt=&quot;hashcalc&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Linux&quot;&gt;&lt;a href=&quot;#Linux&quot; class=&quot;headerlink&quot; title=&quot;Linux&quot;&gt;&lt;/a&gt;Linux&lt;/h2&gt;&lt;p&gt;Linux一般都内置了常见的hashsum命令，包括md5sum以及sha家族的ha224sum, sha256sum, sha384sum and sha512sum等。&lt;/p&gt;
&lt;h3 id=&quot;直接计算&quot;&gt;&lt;a href=&quot;#直接计算&quot; class=&quot;headerlink&quot; title=&quot;直接计算&quot;&gt;&lt;/a&gt;直接计算&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;md5sum thefile.iso&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sha1sum thefile.iso&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;与给定的checksum文件比对&quot;&gt;&lt;a href=&quot;#与给定的checksum文件比对&quot; class=&quot;headerlink&quot; title=&quot;与给定的checksum文件比对&quot;&gt;&lt;/a&gt;与给定的checksum文件比对&lt;/h3&gt;&lt;p&gt;很多时候下载方都会提供一个checksum文件用来进行比对，这时候我们可以添加一个&lt;code&gt;-c&lt;/code&gt;或者&lt;code&gt;--check&lt;/code&gt;参数来进行比对&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;md5sum -c md5.checksum thefile.iso&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sha512sum -c sha512.checksum thefilel.iso&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Ma-OS-X&quot;&gt;&lt;a href=&quot;#Ma-OS-X&quot; class=&quot;headerlink&quot; title=&quot;Ma OS X&quot;&gt;&lt;/a&gt;Ma OS X&lt;/h2&gt;&lt;p&gt;Mac OS X也内置了和Linux一样的命令，你可以参考Linux进行使用。&lt;br&gt;同时，你也可以选择更加平易近人的应用：&lt;br&gt;&lt;a href=&quot;https://itunes.apple.com/cn/app/ha-xi-ma-ji-suan-qi/id463459213?mt=12&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;哈希码计算器&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Android&quot;&gt;&lt;a href=&quot;#Android&quot; class=&quot;headerlink&quot; title=&quot;Android&quot;&gt;&lt;/a&gt;Android&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://play.google.com/store/apps/details?id=jp.md5checker&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hash Checker&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://play.google.com/store/apps/details?id=com.ginkel.hashit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hash It!&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;更新日志&quot;&gt;&lt;a href=&quot;#更新日志&quot; class=&quot;headerlink&quot; title=&quot;更新日志&quot;&gt;&lt;/a&gt;更新日志&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;2015年10月28日 完成初稿&lt;/li&gt;
&lt;/ul&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;前一阵子的Xcodeghost事件给所有人都好好的上了一课——校验的重要性。无论何时，一定要校验！一定要校验！！一定要校验！！！重要的事情重复三遍总是没错的。如果真的无法做到这一点，最起码这些一定要注意：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;系统镜像&lt;/li&gt;
&lt;li&gt;底层开发工具&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;选择官方认证的软件源，地址尽可能地使用HTTPS而非HTTP以避免缓存影响&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Opinion" scheme="https://xuanwo.org/categories/Opinion/"/>
    
    
      <category term="Software" scheme="https://xuanwo.org/tags/Software/"/>
    
  </entry>
  
</feed>
